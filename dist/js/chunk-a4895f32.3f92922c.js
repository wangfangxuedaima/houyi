(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4895f32"],{"0334":function(t,e,a){},"03f1":function(t,e,a){"use strict";var r=a("8fa1"),n=a.n(r);n.a},"0765":function(t,e,a){"use strict";var r=a("f5a9"),n=a.n(r);n.a},"07ac":function(t,e,a){var r=a("23e7"),n=a("6f53").values;r({target:"Object",stat:!0},{values:function(t){return n(t)}})},"0bba":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flight-dia-wraper"},[a("el-dialog",{attrs:{title:t.checkRespnoseData.message,visible:t.bIsShowConfirm,width:"800px"},on:{"update:visible":function(e){t.bIsShowConfirm=e}}},[a("el-table",{staticClass:"fligth-table",attrs:{data:t.confirmData,border:""}},t._l(t.confirmColumns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))}})]}}],null,!0)},"el-table-column",e,!1))})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsShowConfirm=!1}}},[t._v("否")]),a("el-button",{attrs:{loading:t.bIsLoadingConfirm,type:"primary",size:"small",plain:""},on:{click:t.fConfirm}},[t._v("是")])],1)],1),a("el-dialog",{attrs:{title:"将要投放的广告组与以下广告组关联了相同排期包，是否要设置冲突广告组？",visible:t.bIsShowSetConflict,width:"800px"},on:{"update:visible":function(e){t.bIsShowSetConflict=e}}},[a("el-table",{staticClass:"fligth-table",attrs:{data:t.conflictData,border:""}},t._l(t.conflictColumns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))}})]}}],null,!0)},"el-table-column",e,!1))})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:t.fNoSetConflict}},[t._v("否")]),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.fSetConflict}},[t._v("是")])],1)],1)],1)},n=[],i=(a("99af"),a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("b64b"),a("159b"),a("96cf"),a("1da1")),o=a("bbf6"),s={props:{adgroups:{type:Array,default:function(){return[]}}},data:function(){return{confirmColumns:[{prop:"advId",label:"广告ID","min-width":60},{prop:"adGroupId",label:"广告组ID","min-width":60},{prop:"content",label:"内容","min-width":200}],conflictColumns:[{prop:"id",label:"更新广告组ID","min-width":60},{prop:"conflictId",label:"冲突广告组ID","min-width":60},{prop:"name",label:"冲突广告组名称","min-width":200}],checkRespnoseData:{},conflictData:[],conflictAdgroups:[],bIsShowConfirm:!1,bIsLoadingConfirm:!1,bIsShowSetConflict:!1}},computed:{adgroupIds:function(){return this.adgroups.map((function(t){return t.id})).join(",")},confirmData:function(){var t=[],e=this.checkRespnoseData.data;return this.bIsShowConfirm&&e&&Object.keys(e).forEach((function(a){t.push({advId:a,adGroupId:e[a][0],content:e[a][1]})})),t}},methods:{setData:function(t){this.checkRespnoseData=t,702==t.status?this.bIsShowConfirm=!0:this.fConfirm()},fConfirm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.bIsLoadingConfirm=!0,e.next=3,Object(o["f"])(t.adgroupIds);case 3:a=e.sent,t.fHiddenConfirm(),0==a.status&&null!=a.data?(r=t.fDealConflictData(a.data),n=r.confirmData,i=r.adgroupArray,t.conflictAdgroups=i,t.conflictData=n,t.bIsShowSetConflict=!0):t.fFlight();case 6:case"end":return e.stop()}}),e)})))()},fNoSetConflict:function(){this.bIsShowSetConflict=!1,this.fFlight()},fSetConflict:function(){var t=this;this.bIsShowSetConflict=!1,Object(o["w"])(this.conflictAdgroups).then((function(e){var a="自动设置冲突广告组".concat(0==e.status?"成功":"失败","，是否继续更新投放?");t.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.fFlight()}))["catch"]((function(){t.$parent.fReload()}))}))["catch"]((function(){t.$message({message:"自动设置冲突广告组发生异常！",type:"error"})}))},fFlight:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$parent.fCheckAdGroupStatus(t.adgroupIds);case 2:if(a=e.sent,!a){e.next=5;break}return e.abrupt("return");case 5:Object(o["n"])(t.adgroupIds).then((function(e){e=e||{};var a=Object.keys(e).map((function(t){return'<p style="margin-bottom:10px">'.concat(t,": ").concat(e[t].mess,"</p>")})).join("");t.$alert(a,"",{dangerouslyUseHTMLString:!0,callback:function(){t.$parent.fReload()}})}))["catch"]((function(){t.$message({message:"操作失败！",type:"error"}),t.$parent.fReload()}));case 6:case"end":return e.stop()}}),e)})))()},fDealConflictData:function(t){var e=[],a=[];return Object.keys(t).forEach((function(r){var n=[],i=t[r];i&&null!=i&&i.forEach((function(t){e.push({id:r,conflictId:t.id,name:t.name}),n.push(t.id)})),a.push({id:r,conflictgroup:n.join(",")})})),{confirmData:e,adgroupArray:a}},fHiddenConfirm:function(){this.bIsShowConfirm=!1,this.bIsLoadingConfirm=!1}}},l=s,c=(a("7698"),a("2877")),u=Object(c["a"])(l,r,n,!1,null,null,null);e["a"]=u.exports},"0c10":function(t,e,a){"use strict";var r=a("da63"),n=a.n(r);n.a},"0ca9":function(t,e,a){},1026:function(t,e,a){"use strict";var r=a("7c3a"),n=a.n(r);n.a},1081:function(t,e,a){"use strict";var r=a("2d81"),n=a.n(r);n.a},"14d8":function(t,e,a){},1860:function(t,e,a){},"1da7":function(t,e,a){},"1dea":function(t,e,a){"use strict";var r=a("1da7"),n=a.n(r);n.a},"20ce":function(t,e,a){"use strict";(function(t){a("99af"),a("4de4"),a("4160"),a("caad"),a("a15b"),a("d81d"),a("a434"),a("0d03"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("2532"),a("1276"),a("159b"),a("96cf");var r=a("1da1"),n=a("5530"),i=a("1b62"),o=a("ed08"),s=a("7878"),l=a("bbf6"),c=a("46f1"),u=a("4417"),d=a("2dd8"),p=a("90c4"),f=a("8447"),m=a("407d"),b=a("23b4"),h=a("0bba"),g=a("bb42"),v=a("b58c"),y=a("f918"),w=a("60fe");e["a"]={mixins:[i["c"]],components:{TopSearchBar:c["a"],AdvInfo:u["a"],AdvAdd:d["a"],CopyInner:p["a"],CopyOuter:f["a"],AdnoteSet:m["a"],ImportMonitor:b["a"],FlightConfirm:h["a"],ConflictView:g["a"],RelatedBplist:v["a"],RelatedFreq:y["a"]},data:function(){var t={slotName:"",isVisible:!1,attrs:{width:"100px",placement:"bottom",trigger:"hover","popper-class":"adgroup-popover"}},e=this.$route.query.projectid;return{columns:[{prop:"id",label:"广告组ID","min-width":80},{prop:"flightstatus",label:"状态","min-width":80,filter:"flightstatusFilter"},{prop:"name",label:"广告组名称","min-width":200,formatter:this.fFormatName},{prop:"platsname",label:"平台","min-width":90,formatter:this.fFormatPlat},{prop:"starttime",label:"地域","min-width":120,formatter:function(t){return t.area||"全球"}},{prop:"resource",label:"内容","min-width":220},{prop:"adstyleName",label:"广告形式","min-width":120},{prop:"duration",label:"时长","min-width":60},{prop:"flightDurationStart",label:"投放时间","min-width":280,formatter:function(t){return t.starttime&&t.endtime?"".concat(Object(o["d"])(t.starttime),"\n               ~ ").concat(Object(o["d"])(t.endtime)):""}},{prop:"modifytime",label:"最后更新时间","min-width":160,filter:"time"},{prop:"note",label:"排期包备注","min-width":90},{prop:"usetypes",label:"使用属性","min-width":80,formatter:function(t){var e=t.usetypes.map((function(t){return w["d"][t]||""})).filter((function(t){return!!t}));return e.join(",")}},{prop:"adNote",label:"广告备注","min-width":80},{prop:"type",label:"广告类型","min-width":100,formatter:function(t){var e={0:"普通线",1:"事故线"};return e[t.type]||"未知"}},{prop:"templateName",label:"模板类型","min-width":160},{prop:"activeAdType",label:"广告类型字段","min-width":100}],searchItems:{labelWidth:"75px",topButtons:[{name:"新建广告"},{name:"新建广告组",routerLink:"/flight/advproject/adgroup/bplist?projectid=".concat(e)},{name:"复制广告组",rightIcon:"el-icon-caret-bottom",popover:Object(n["a"])({},t,{slotName:"copy-adgroup-solt"})},{name:"编辑广告",pemissionUrl:"/p/ad/edit"},{name:"更新投放",pemissionUrl:"/d/advflight/flight"},{name:"更多",rightIcon:"el-icon-caret-bottom",popover:Object(n["a"])({},t,{slotName:"more-adgroup-solt"})},{name:"导入/导出监测",rightIcon:"el-icon-caret-bottom",popover:Object(n["a"])({},t,{slotName:"import-adgroup-solt"})},{name:"组频次"}],defaultSearch:{placeholder:"搜索内容后请敲回车键...",key:"FCNBSearch"},searchItems:[{type:"Input",prop:"name",formItemAttrs:{label:"广告组名称"},attrs:{clearable:!0,style:"width:120px"}},{type:"Select",prop:"adstyle",default:"",formItemAttrs:{label:"广告形式"},attrs:{placeholder:"请选择",clearable:!0,style:"max-width:150px"},listGetter:{url:"",params:{datatype:"plat"},keyMap:{list:"data"},data:[],optionValue:"map_value",optionName:"map_name"}},{type:"Select",prop:"duration",default:"",formItemAttrs:{label:"广告时长","label-width":"75px"},attrs:{placeholder:"请选择",clearable:!0,style:"max-width:100px"},data:w["e"]},{type:"Select",prop:"platCodes",default:[],formItemAttrs:{label:"平台","label-width":"50px"},attrs:{placeholder:"请选择",multiple:!0,"collapse-tags":!0,clearable:!0,style:"max-width:180px"},listGetter:{url:"/system/basedata/list",params:{searchDatatype:"plat"},keyMap:{list:"rows"},data:[],optionValue:"datavalue",optionName:"dataname"}},{type:"Select",prop:"usetype",formItemAttrs:{label:"使用属性"},attrs:{placeholder:"请选择",clearable:!0,style:"max-width:150px"},listGetter:{url:"/system/basedata/list",params:{searchDatatype:"usetype"},keyMap:{list:"rows"},data:[],optionValue:"datavalue",optionName:"dataname",filter:function(t){return t.filter((function(t){return 2!=t.status}))}}},{type:"Select",prop:"areaCodes",default:[],formItemAttrs:{label:"地域定向"},attrs:{placeholder:"请选择",multiple:!0,filterable:!0,"collapse-tags":!0,clearable:!0,style:"max-width:150px"},listGetter:{url:"/d/area/searchArealist",params:{},keyMap:{list:"rows"},data:[],optionValue:"value",optionName:"data",filter:s["b"]}},{type:"Select",prop:"flightstatus",default:"",formItemAttrs:{label:"状态","label-width":"50px"},attrs:{placeholder:"选择状态",clearable:!0,style:"max-width:150px"},data:[{datavalue:"",dataname:"请选择"},{datavalue:"0",dataname:"未投放"},{datavalue:"2",dataname:"预投放"},{datavalue:"3",dataname:"投放暂停"},{datavalue:"4",dataname:"投放终止"},{datavalue:"5",dataname:"投放成功"},{datavalue:"6",dataname:"投放正在进行"},{datavalue:"7",dataname:"投放未成功"},{datavalue:"8",dataname:"投放物料审核不通过"},{datavalue:"9",dataname:"已提交"},{datavalue:"10",dataname:"投放完成"}]},{type:"Select",prop:"type",default:"",formItemAttrs:{label:"广告类型"},attrs:{placeholder:"选择状态",clearable:!0,style:"max-width:150px"},data:[{datavalue:"",dataname:"请选择"},{datavalue:"0",dataname:"普通线"},{datavalue:"1",dataname:"故事线"}]},{type:"Input",prop:"materialid",formItemAttrs:{label:"物料ID","label-width":"50px"},attrs:{clearable:!0,style:"width:150px"}},{type:"Input",prop:"note",formItemAttrs:{label:"排期包备注"},attrs:{clearable:!0,style:"width:150px"}},{type:"DataPicker",prop:"submitTime",startTimeKey:"starttime",endTimeKey:"endtime",formItemAttrs:{label:"投放日期","label-width":"80px"},attrs:{clearable:!0,style:"width:250px",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyyMMdd","value-format":"yyyyMMdd"}},{type:"Input",prop:"mainBgIdStr",formItemAttrs:{label:"主包ID","label-width":"50px"},attrs:{clearable:!0,style:"width:150px"}},{type:"CheckBox",prop:"delbpstatus",default:0,formItemAttrs:{label:"无效广告组"},attrs:{"true-label":1,"false-label":0}},{type:"Input",prop:"adNote",formItemAttrs:{label:"广告备注"},attrs:{clearable:!0,style:"width:150px"}},{type:"Input",prop:"materialIdListStr",formItemAttrs:{label:"频次ID","label-width":"50px"},attrs:{clearable:!0,style:"width:120px"}}]},copyActionList:["本单复制","跨单复制"],moreActionList:["终止","暂停","删除","导出执行信","冲突广告组","取消互斥","设置广告备注"],importActionList:["下载导入模版","导入监测地址","批量导出监测"],searchObject:{projectid:e,bussinessstatus:-1},bIsLoading:!1,selectedRows:[],currentSelectdRow:null,projectId:e,projectInfo:{},maIds:"",bIsAddAdvVisible:!1,bIsCopyInnerVisible:!1,bIsCopyOuterVisible:!1,bIsSetAdNoteVisible:!1,bISImportMonitorVisible:!1,bISSetConfilctVisible:!1,bISModifyRelatedVisible:!1,bISRelatedFreqVisible:!1}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fGetProjectInfo();case 2:return e.next=4,t.fReload();case 4:case"end":return e.stop()}}),e)})))()},methods:{fReload:function(){var t=this;this.selectedRows=[],this.$nextTick((function(){t.$refs.pageRef.fReload()}))},fGetProjectInfo:function(){var t=this;Object(l["q"])(this.projectId).then((function(e){var a=e.rows||[];a.forEach((function(e){e.id==t.projectId&&(t.projectInfo=e)}))}))},fOnResponse:function(e){var a=this,r=e.rows;t.nextTick((function(){var t=a.$route.query.ids&&a.$route.query.ids.split(",");t&&r.forEach((function(e){t.includes(e.id.toString())&&(a.$refs.tableRef.toggleRowSelection(e,!0),a.selectedRows.push(e))}))}))},fSearch:function(t){this.searchObject=Object(n["a"])({},t,{projectid:this.projectId,areaCodes:t.areaCodes.join(","),platCodes:t.platCodes.join(","),delbpstatus:1==t.delbpstatus?1:""}),this.fReload()},fReloadAdvInfo:function(){this.$refs.advInfoRef.fSelectRow(this.currentSelectdRow,!0)},fSelectionChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.selectedRows=t,this.currentSelectdRow=e,this.$refs.advInfoRef.fSelectRow(e)},tableRowClassName:function(t){var e=t.row,a=this.selectedRows.map((function(t){return t.id}));return a.includes(e.id)?"selected-row":""},fChangeClickRow:function(t){if(this.selectedRows.includes(t)){var e=-1;this.selectedRows.forEach((function(a,r){t.id===a.id&&(e=r)})),this.$refs.tableRef.toggleRowSelection(t,!1),this.selectedRows.splice(e,1)}else this.$refs.tableRef.toggleRowSelection(t,!0),this.selectedRows.push(t);this.currentSelectdRow=t,this.$refs.advInfoRef.fSelectRow(t)},fOperation:function(t){this.fTopOperationClick(t.name)},fTopOperationClick:function(t){var e={"新建广告":"请选择广告组后再批量创建广告!","编辑广告":"请选择要编辑的广告","本单复制":"请选择要复制的广告组!","跨单复制":"请选择要复制的广告组!","更新投放":"请选择需要更新投放的广告组！","终止":"请选择需要终止投放的广告组!","暂停":"请选择需要暂停投放的广告组！","删除":"请选择要删除的广告组!","导出执行信":"请先选择广告组!","冲突广告组":"请选择记录进行操作！","下载导入模版":"请先选择广告组","批量导出监测":"请先选择广告组","组频次":"请先选择广告组！"};if(0===this.selectedRows.length&&e[t])this.$message({message:e[t],type:"warning"});else switch(t){case"新建广告":this.bIsAddAdvVisible=!0;break;case"编辑广告":this.fEditAd();break;case"本单复制":this.bIsCopyInnerVisible=!0;break;case"跨单复制":if(this.selectedRows.length>1)return void this.$message({message:"跨单复制只能选择一个广告组进行复制!",type:"warning"});this.bIsCopyOuterVisible=!0;break;case"更新投放":this.fReFlight();break;case"终止":this.fOperateAdgroups("stop");break;case"暂停":this.fOperateAdgroups("suspend");break;case"删除":this.fDeleteAdgroups();break;case"导出执行信":this.fDownLetter();break;case"冲突广告组":this.fSetConflict();break;case"取消互斥":this.fCancelConflict();break;case"设置广告备注":this.bIsSetAdNoteVisible=!0;break;case"下载导入模版":this.fDownExportTemplate();break;case"导入监测地址":this.bISImportMonitorVisible=!0;break;case"批量导出监测":this.fDownDetectionTemplate();break;case"组频次":this.fRelatedFreq();break}},fEditAd:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.fGetSeletedAdgroupIds(),e.next=3,t.fCheckAdGroupStatus(a);case 3:if(r=e.sent,!r){e.next=6;break}return e.abrupt("return");case 6:if(n=/^(\d+,)*(\d+|(,)*)$/,!(t.maIds.length>0)||n.test(t.maIds)){e.next=10;break}return t.$message({message:"物料ID格式填写错误！请检查",type:"warning"}),e.abrupt("return");case 10:t.$router.push({path:"/flight/advproject/adgroup/adedit",query:{projectid:t.projectId,agids:a,maIds:t.maIds}});case 11:case"end":return e.stop()}}),e)})))()},fReFlight:function(){var t=this,e=!1,a=!0;if(this.selectedRows.forEach((function(t){a&&8===t.flightstatus&&(a=!1);var r="前贴片"===t.adstyleName&&"可跳过"===t.activeAdType&&"*"!==t.conflictgroup;!e&&r&&(e=!1)})),e)this.$message.warning("联动广告可跳过前贴片的广告必须设置冲突所有，不能更新投放！");else if(a){var r=this.fGetSeletedAdgroupIds();Object(l["g"])(r).then((function(e){[0,702].includes(e.status)?t.$refs.flightConfirmRef.setData(e):t.$message.error(e.message)}))["catch"]((function(){t.$message.error("读取发生异常！")}))}else this.$message.warning("状态为'审核拒绝'的广告组不允许更新投放")},fSetConflict:function(){var t=this.selectedRows.filter((function(t){return!["前贴","中插","前贴片","中插片"].includes(t.adstyleName)}));if(t.length>0)this.$message({message:"只有前贴片和中插片可以设置冲突广告组",type:"warning"});else{var e=this.selectedRows.filter((function(t){return"联动广告"===t.activeAdType&&["mad-1"].includes(t.positionDirect)}));if(e.length>0)this.$message({message:"联动广告倒一帖不支持设置冲突广告组",type:"warning"});else{var a=this.fGetSeletedAdgroupIds().split(",");this.$refs.conflictViewRef.setConflictData(this.projectInfo.number,a),this.bISSetConfilctVisible=!0}}},fRelatedFreq:function(){var t=[];this.selectedRows.forEach((function(e){1!=e.type&&t.push(e.id)})),t.length>0?this.$message({message:"id为".concat(t.join(",")," 的广告组广告类型不为故事线，无法设置组频次！"),type:"warning"}):this.bISRelatedFreqVisible=!0},fOperateAdgroups:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.fGetSeletedAdgroupIds(),a.next=3,e.fCheckAdGroupStatus(r);case 3:if(n=a.sent,!n){a.next=6;break}return a.abrupt("return");case 6:Object(l["r"])(t,r).then((function(t){t=t||{};var a=Object.keys(t).map((function(e){return'<p style="margin-bottom:10px">'.concat(e,": ").concat(t[e].mess,"</p>")})).join("");e.$alert(a,"",{dangerouslyUseHTMLString:!0,callback:function(){e.fReload()}})}))["catch"]((function(){e.$message({message:"操作失败！",type:"info"})}));case 7:case"end":return a.stop()}}),a)})))()},fDeleteAdgroups:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.fGetSeletedAdgroupIds(),e.next=3,t.fCheckAdGroupStatus(a);case 3:if(r=e.sent,!r){e.next=6;break}return e.abrupt("return");case 6:Object(l["k"])({idsStr:a,projectid:t.projectInfo.id}).then((function(e){1==e.status||0==e.status?(t.$message({message:e.message,type:"success"}),t.fReload()):t.$message({message:"广告组:  ".concat(e.data.join(",")," ").concat(e.message),type:"warning"})}));case 7:case"end":return e.stop()}}),e)})))()},fDownLetter:function(){var t=this.fGetSeletedAdgroupIds();window.location.href="/d/advertisement/downloadLettersExcel?agids=".concat(t)},fCancelConflict:function(){var t=this;this.$confirm("是否取消所选广告组的互斥？","取消互斥",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.fGetSeletedAdgroupIds();Object(l["d"])(e).then((function(e){t.$message({message:e.message,type:0==e.status?"success":"error"}),t.fReload()}))}))["catch"]((function(){t.$message({message:"请求异常！",type:"info"})}))},fDownExportTemplate:function(){var t=this,e=this.fGetSeletedAdgroupIds();this.$message({message:"正在下载请耐心等待",type:"warning"}),Object(l["m"])(e).then((function(e){if("200"!=e.status)t.$message({message:e.errMessage,type:"error"});else{var a=e.path;window.location.href="/".concat(a)}}))},fDownDetectionTemplate:function(){var t=this,e=this.fGetSeletedAdgroupIds();this.$message({message:"正在下载请耐心等待",type:"warning"}),Object(l["l"])(e).then((function(e){if("200"!=e.status)t.$message({message:e.errMessage,type:"error"});else{var a=e.path;window.location.href="/".concat(a)}}))},fDeleteFreq:function(t,e){var a=this;this.$confirm("是否执行删除广告组频次！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["j"])(t,e).then((function(t){a.$message({message:t.message||(1==t.status?"删除成功":"删除失败"),type:1==t.status?"success":"error"}),1==t.status&&a.fReload()}))}))},fShowModifyRelated:function(t){this.$refs.RelatedBpRef.setData(t.id,this.projectInfo.id),this.bISModifyRelatedVisible=!0},fCheckAdGroupStatus:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["e"])(t);case 2:if(r=a.sent,!r.data){a.next=6;break}return e.$message({message:r.data,type:"error"}),a.abrupt("return",!0);case 6:return a.abrupt("return",!1);case 7:case"end":return a.stop()}}),a)})))()},fGetSeletedAdgroupIds:function(){return this.selectedRows.map((function(t){return t.id})).join(",")},fFormatName:function(t,e){var a=t.iscopy,r=t.needUpdateFlight,n="",i="";a&&1==a&&(n='<i class="el-icon-notebook-2" style="color:#fe6b45"></i>'),1==r&&(i='style="color: red;font-weight: bolder;"');var o='<a href="javascript:void(0)" agid="'.concat(t.id,'" name="adgroup_name"> \n        ').concat(n,'<span  class="link" ').concat(i,"> ").concat(t[e],"</span></a>");return o},fFormatPlat:function(t){var e=t.platsname,a="";return 1==t.ismodifyverify?(a='class="c-red" style="color: red;font-weight: bolder"',"<span "+a+">"+e+"</span>"):e}}}}).call(this,a("4362"))},"23b4":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"import-mointor-wraper"},[a("el-dialog",{staticClass:"import-mointor-dia",attrs:{title:"批量导入监测",visible:t.bIsVisible,width:"450px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[a("div",{staticStyle:{color:"red","margin-bottom":"10px"}},[t._v("导入操作将会覆盖原有数据，请谨慎操作")]),a("el-upload",{ref:"fileUpload",attrs:{multiple:!1,action:"","http-request":t.fUploadRequest,"show-file-list":!1,"auto-upload":!1,"on-change":t.fChangeFile}},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""}},[t._v("点击上传")]),t.fileName?a("el-tag",{staticClass:"file-name",attrs:{type:"info",size:"small"}},[t._v(" "+t._s(t.fileName)+" ")]):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.bIsLoadingPreview,disabled:!t.fileName,type:"primary",size:"small",plain:""},on:{click:t.fSubmitFile}},[t._v(" 导入并预览 ")])],1)],1),a("el-dialog",{attrs:{title:"导入监测预览",visible:t.bIsShowPreview,width:"1200px"},on:{"update:visible":function(e){t.bIsShowPreview=e}}},[a("el-table",{staticClass:"import-table",attrs:{data:t.previewList,"cell-class-name":t.changeCellStyle,border:""}},t._l(t.previewColumns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))}})]}}],null,!0)},"el-table-column",e,!1))})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsShowPreview=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.fSubmitImport}},[t._v("导入")])],1)],1),a("el-dialog",{attrs:{title:"",visible:t.bIsShowConfirm,width:"1200px"},on:{"update:visible":function(e){t.bIsShowConfirm=e}}},[a("div",{staticStyle:{color:"red","margin-bottom":"10px"}},[t._v("要导入的数据存在以下情形，请确定是否继续导入:")]),a("el-table",{staticClass:"import-table",attrs:{data:t.confirmData.confirmList||[],border:""}},t._l(t.confirmColumns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))}})]}}],null,!0)},"el-table-column",e,!1))})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsShowConfirm=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.fConfirmImport}},[t._v("导入")])],1)],1),a("el-dialog",{attrs:{title:"",visible:t.bIsShowError,width:"1200px"},on:{"update:visible":function(e){t.bIsShowError=e}}},[a("div",{staticStyle:{color:"red","margin-bottom":"10px"}},[t._v(" 以下广告数据存在如下错误，不允许导入。你可以选择继续导入其他无误数据，或者就此取消所有导入，请确定: ")]),a("el-table",{staticClass:"import-table",attrs:{data:t.confirmData.errorList||[],border:""}},t._l(t.errorColumns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))}})]}}],null,!0)},"el-table-column",e,!1))})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsShowError=!1}}},[t._v("取消导入")]),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.fErrorGoConfirmImport}},[t._v("继续导入剩余正确数据")])],1)],1)],1)},n=[],i=(a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("b64b"),a("ac1f"),a("1276"),a("bbf6")),o={data:function(){return{previewColumns:[{prop:"id",label:"广告ID","min-width":60},{prop:"customerredirect",label:"广告跳转地址","min-width":180},{prop:"click",label:"第三方点击监测地址","min-width":180,formatter:function(t){var e=t.click||[],a=e.map((function(t){return"<p>".concat(t||"","</p>")}));return a.join("")}},{prop:"endMonition",label:"第三方结束曝光检测地址","min-width":180},{prop:"timestr",label:"曝光时间","min-width":120,formatter:function(t){var e=t.monitions||[],a=e.map((function(t){return"<p>".concat(t.timestr||"","</p>")}));return a.join("")}},{prop:"company",label:"上报公司","min-width":120,formatter:function(t){var e=t.monitions||[],a=e.map((function(t){return"<p>".concat(t.company||"","</p>")}));return a.join("")}},{prop:"address",label:"第三方曝光监测地址","min-width":360,formatter:function(t){var e=t.monitions||[],a=e.map((function(t){var e=t.address||"";return e&&1==t.checktongyuan&&(e="不是同源机房代码"),"<p>".concat(e,"</p>")}));return a.join("")}},{prop:"appjumpaddr",label:"app跳转地址","min-width":180},{prop:"appjumpmaddr",label:"app跳转监测地址","min-width":180}],confirmColumns:[{prop:"advid",label:"广告id","min-width":60},{prop:"type",label:"地址名称","min-width":60,formatter:function(t){var e=t.confimMsg||[],a=Object.keys(e).map((function(t){var e=t.split("#\\#")[0];return"<p>".concat(e||"","</p>")}));return a.join("")}},{prop:"url",label:"地址","min-width":60,formatter:function(t){var e=t.confimMsg||[],a=Object.keys(e).map((function(t){var e=t.split("#\\#")[1];return"<p>".concat(e||"","</p>")}));return a.join("")}},{prop:"confimMsg",label:"错误或警告信息","min-width":60,formatter:function(t){var e=t.confimMsg||[],a=Object.keys(e).map((function(t){return"<p>".concat(e[t]||"","</p>")}));return a.join("")}}],errorColumns:[{prop:"advid",label:"广告id","min-width":60},{prop:"type",label:"地址名称","min-width":60,formatter:function(t){var e=t.errorMsg||[],a=Object.keys(e).map((function(t){var e=t.split("#\\#")[0];return"<p>".concat(e||"","</p>")}));return a.join("")}},{prop:"url",label:"地址","min-width":60,formatter:function(t){var e=t.errorMsg||[],a=Object.keys(e).map((function(t){var e=t.split("#\\#")[1];return"<p>".concat(e||"","</p>")}));return a.join("")}},{prop:"confimMsg",label:"错误或警告信息","min-width":60,formatter:function(t){var e=t.errorMsg||[],a=Object.keys(e).map((function(t){return"<p>".concat(e[t]||"","</p>")}));return a.join("")}}],fileName:"",previewList:[],confirmData:{},bIsLoadingPreview:!1,bIsShowPreview:!1,bIsShowConfirm:!1,bIsShowError:!1}},props:{value:{type:Boolean,default:!1}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{fSubmitFile:function(){this.$refs.fileUpload.submit(),this.$refs.fileUpload.clearFiles()},fChangeFile:function(t){this.fileName=t.name},fUploadRequest:function(t){var e=this,a="/d/advertisement/importMonitorData",r=["xls","xlsx"],n=t.file,i=n.name.split("."),o=i[i.length-1];if(r.includes(o)){this.bIsLoadingPreview=!0;var s=new FormData;s.append("importMonitorFile",n);var l=new XMLHttpRequest;l.open("post",a,!0),l.onload=function(){var t=JSON.parse(l.response);"200"===t.status&&t.data?(e.previewList=t.data||[],e.bIsShowPreview=!0):e.$message.error("上传过程中发生错误请重新上传～"),e.bIsVisible=!1,e.bIsLoadingPreview=!1,e.fileName=""},l.onerror=function(){e.$message.error("上传过程中发生错误请重新上传～")},l.send(s)}else this.$message.error("请使用excel文件导入！")},changeCellStyle:function(t){var e=t.row,a=t.column,r=["click","company","address"];if("customerredirect"===a.property&&!e[a.property])return"notice-red-cell";var n=e.monitions&&e.monitions[0];return r.includes(a.property)&&!n[a.property]?"notice-red-cell":void 0},fSubmitImport:function(){var t=this;Object(i["u"])().then((function(e){if("200"===e.status){var a=!1;t.confirmData=e,e.errorList&&(a=!0,t.bIsShowPreview=!1,t.bIsShowError=!0),a||(e.confirmList?(t.bIsShowPreview=!1,t.bIsShowConfirm=!0):t.$message.error("没有数据可以导入"))}else t.$message.error(e.errMessage||"")}))},fErrorGoConfirmImport:function(){this.confirmData.confirmList?(this.bIsShowError=!1,this.bIsShowConfirm=!0):this.$message.warning("已经没有正确数据可以导入！")},fConfirmImport:function(){var t=this;Object(i["v"])().then((function(e){t.$message({message:"200"==e.status?e.successMsg:e.errMessage,type:"200"==e.status?"success":"error"}),t.bIsShowConfirm=!1}))["catch"]((function(){t.bIsShowConfirm=!1,t.$message({message:"保存导入数据时发生异常，请重试或联系系统管理员！",type:"info"})}))}}},s=o,l=(a("49d1"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,null,null);e["a"]=c.exports},"2c78":function(t,e,a){"use strict";var r=a("3181"),n=a.n(r);n.a},"2d81":function(t,e,a){},"2dd8":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"新建广告",visible:t.bIsVisible,width:"360px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[t._v(" 编号后缀: "),a("el-input",{staticStyle:{width:"220px","margin-left":"5px"},attrs:{placeholder:"输入广告后缀",size:"small"},model:{value:t.suffix,callback:function(e){t.suffix=e},expression:"suffix"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{disabled:t.confirmDisabled,type:"primary",size:"small",plain:""},on:{click:t.fAddAdv}},[t._v(" 确 定 ")])],1)],1)},n=[],i=(a("d81d"),a("bbf6")),o={data:function(){return{suffix:"",confirmDisabled:!1}},props:{value:{type:Boolean,default:!1},adgroups:{type:Array,default:function(){return[]}}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{fAddAdv:function(){var t=this,e=this.adgroups.map((function(e){return{adgroupId:e.id,suffix:t.suffix,materialIds:[],pushFrequencyIds:[],groupFrequencyIds:[],frequencyIds:[],primerMaterialName:1,monitions:[],starttime:"",endtime:"",starttimeStr:"2",endtimeStr:"2",callback:"",customerredirect:"",redirect:"",mclickstatistics:"",title:"",displaykeyword:"",skipseconds:"",skipmonitor:"",voiceProvider:"",successword:"",startskipseconds:"",isvpaid:"",vpaidurl:"",thirdPingBack:"",bgcolorForFocus:"",delay:"",cascadeIds:[],appjumpaddr:"",appjumpmaddr:"",downloadurl:"",adtemplate:"",imagetitle:"",imagesubtitle:""}}));this.confirmDisabled=!0,Object(i["a"])(e).then((function(e){if(t.confirmDisabled=!1,t.bIsVisible=!1,t.suffix="",0===e.status)return t.$message({message:"新建成功",type:"success"}),void t.$emit("addAdvSuccess");t.$message({message:e.message||"新建失败",type:"error"})}))}}},s=o,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);e["a"]=c.exports},"2f1d":function(t,e,a){"use strict";var r=a("0ca9"),n=a.n(r);n.a},"30f5":function(t,e,a){},3181:function(t,e,a){},"345a":function(t,e,a){},"407d":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"设置广告备注",visible:t.bIsVisible,width:"500px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[t._v(" 广告备注: "),a("el-input",{staticStyle:{width:"300px","margin-left":"5px"},attrs:{placeholder:"广告备注",size:"small"},model:{value:t.adNote,callback:function(e){t.adNote=e},expression:"adNote"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{disabled:t.confirmDisabled||!t.adNote,type:"primary",size:"small",plain:""},on:{click:t.fAddAdv}},[t._v(" 确 定 ")])],1)],1)},n=[],i=(a("d81d"),a("bbf6")),o={data:function(){return{adNote:"",confirmDisabled:!1}},props:{value:{type:Boolean,default:!1},adgroups:{type:Array,default:function(){return[]}}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{fAddAdv:function(){var t=this;this.confirmDisabled=!0;var e={adNote:this.adNote};e.adGroupIds=this.adgroups.map((function(t){return t.id})),Object(i["b"])(e).then((function(e){t.confirmDisabled=!1,t.bIsVisible=!1,t.adNote="",t.$message({message:e.message||(0==e.status?"设置成功":"设置失败"),type:0==e.status?"success":"error"}),0===e.status&&t.$emit("reload")}))["catch"]((function(){t.bIsVisible=!1,t.$message({message:"系统异常，请稍后重试!",type:"info"})}))}}},s=o,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);e["a"]=c.exports},4417:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade-bottom",mode:"out-in"}},[t.isShow&&t.currentRow?a("div",{staticClass:"adv-info-tables"},[a("el-button",{staticClass:"adv-info-btn",attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.isShow=!1}}},[t._v(" 广告信息 "),a("i",{staticClass:"el-icon-caret-top"})]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.bIsLoading,expression:"bIsLoading"}],staticStyle:{"max-height":"400px",overflow:"scroll"},attrs:{data:t.currentRow,border:""}},[t._l(t.columns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))}})]}}],null,!0)},"el-table-column",e,!1))})),a("el-table-column",{attrs:{align:"center",width:"120px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[0===t.currentGroup.plat&&null!==r.materials?a("el-button",{attrs:{adgroupPlat:t.currentGroup.plat,type:"primary",size:"small",plain:""},on:{click:function(e){return t.fPreviewFlight(r.id)}}},[t._v(" 预投放 ")]):t._e()]}}],null,!1,2709423851)})],2),a("el-dialog",{attrs:{title:"预投放",visible:t.isPreviewDiaVisible,width:"35%",center:""},on:{"update:visible":function(e){t.isPreviewDiaVisible=e}}},[a("div",{staticClass:"preview-content"},[1===t.previewData.pagetype?a("label",[t._v("*请输入预览地址*")]):t._e(),2===t.previewData.pagetype?a("label",[t._v("*请选择要预览的广告条并输入预览地址*")]):t._e(),a("el-input",{staticClass:"preview-url",attrs:{type:"textarea",rows:"4",size:"small"},model:{value:t.previewData.previewUrl,callback:function(e){t.$set(t.previewData,"previewUrl",e)},expression:"previewData.previewUrl"}}),2===t.previewData.pagetype?a("el-select",{staticStyle:{width:"130px"},attrs:{size:"small"},model:{value:t.previewData.previewBarId,callback:function(e){t.$set(t.previewData,"previewBarId",e)},expression:"previewData.previewBarId"}},t._l(t.previewData.bars,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.isPreviewDiaVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{disabled:!t.previewData.previewUrl,type:"primary",size:"small",plain:""},on:{click:t.fGoPreview}},[t._v(" 确 定 ")])],1)])],1):t._e()])},n=[],i=(a("99af"),a("4160"),a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("2532"),a("159b"),a("2909")),o=a("5530"),s=a("bbf6"),l=a("60fe"),c={data:function(){var t=this;return{columns:[{prop:"id",label:"广告ID","min-width":60},{prop:"materialId",label:"物料ID","min-width":80,formatter:function(e){var a=t.fGetMaterials(e),r=a.map((function(t){return"<p>".concat(t.id,"</p>")}));return r.join("")}},{prop:"type",label:"类型","min-width":100,formatter:function(e){var a=t.fGetMaterials(e),r=a.map((function(t){return"<p>".concat(l["c"][t.type]||"","</p>")}));return r.join("")}},{prop:"autocasing",label:"自动套壳","min-width":80,formatter:function(e){var a=t.fGetMaterials(e),r=a.map((function(t){return"<p>".concat(1==t.autocasing?"是":"否","</p>")}));return r.join("")}},{prop:"area",label:"地域","min-width":60,formatter:function(e){var a=t.fGetMaterials(e),r=a.map((function(t){return"<p>".concat(l["a"][t.area]||"","</p>")}));return r.join("")}},{prop:"size",label:"规格","min-width":80,formatter:function(e){var a=t.fGetMaterials(e),r=a.map((function(t){return"<p>".concat(t.width,"*").concat(t.height,"</p>")}));return r.join("")}},{prop:"path",label:"URL","min-width":200,formatter:function(e){var a=t.fGetMaterials(e),r=a.map((function(t){return"<p><a href='".concat(t.path,"' target='_blank'>").concat(t.path,"</a></p>")}));return r.join("")}},{prop:"time",label:"时长","min-width":60,formatter:function(e){var a=t.fGetMaterials(e),r=a.map((function(t){return"<p>".concat(t.time||"","</p>")}));return r.join("")}},{prop:"sort",label:"顺序","min-width":60},{prop:"count",label:"次数","min-width":60},{prop:"flightTime",label:"投放时间","min-width":250,formatter:function(t){return t.starttime&&t.endtime?"".concat(t.starttime," 00:00 ~ ").concat(t.endtime,"  00:00"):""}},{prop:"redirect",label:"GOTO跳转地址","min-width":200},{prop:"customerredirect",label:"广告跳转地址","min-width":200},{prop:"callback",label:"回调函数","min-width":160},{prop:"monitions",label:"曝光地址","min-width":200,formatter:function(t){return null==t.monitions?"":t.monitions.map((function(t){var e=t.time;return null==e?e="":-1==e?e="开始":-2==e&&(e="结束"),"<p>".concat(e?"".concat(e,":"):""," ").concat(t.url,"</p>")})).join(",")}},{prop:"frequenciesId",label:"频次ID","min-width":100,formatter:function(t){return null==t.frequencies?"":t.frequencies.map((function(t){return"<p>".concat(t.id,"</p>")})).join(",")}},{prop:"frequenciesName",label:"频次名称","min-width":100,formatter:function(t){return null==t.frequencies?"":t.frequencies.map((function(t){return"<p>".concat(t.name,"</p>")})).join(",")}},{prop:"frequenciesType",label:"频次类型","min-width":80,formatter:function(t){if(null==t.frequencies)return"";var e=t.frequencies.map((function(t){return"<p>".concat(l["b"][t.type]||"未知","</p>")}));return e.join("")}},{prop:"frequenciesDuration",label:"频控周期","min-width":80,formatter:function(t){if(null==t.frequencies)return"";var e=t.frequencies.map((function(t){return"<p>".concat(t.duration,"</p>")}));return e.join("")}},{prop:"frequenciesNumber",label:"频控次数","min-width":80,formatter:function(t){if(null==t.frequencies)return"";var e=t.frequencies.map((function(t){return"<p>".concat(t.number,"</p>")}));return e.join("")}},{prop:"frequenciesIsAddFrequency",label:"追投","min-width":80,formatter:function(t){if(null==t.frequencies)return"";var e=t.frequencies.map((function(t){return"<p>".concat("1"==t.isAddFrequency?"是":"否","</p>")}));return e.join("")}},{prop:"frequenciesAddFrequencyNum",label:"追投次数","min-width":80,formatter:function(t){if(null==t.frequencies)return"";var e=t.frequencies.map((function(t){return"<p>".concat(null==t.addFrequencyNum?"":t.addFrequencyNum,"</p>")}));return e.join("")}}],bIsLoading:!1,isShow:!1,rowList:[],currentRow:"",currentGroup:{},isPreviewDiaVisible:!1,previewData:{}}},methods:{fSelectRow:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.id){this.isShow=!0,this.currentGroup=t;var r=this.rowList.map((function(a){var r=a&&a[0]&&a[0].groupid;return r===t.id&&(e.currentRow=a),r}));r.includes(t.id)&&!a||(this.bIsLoading=!0,Object(s["p"])(t.id).then((function(a){var r=a.rows.map((function(e){return Object(o["a"])({},e,{groupid:t.id})}));e.rowList.push(r),e.currentRow=r,e.bIsLoading=!1})))}},fGetMaterials:function(t){return[].concat(Object(i["a"])(t.materials||[]),Object(i["a"])(t.floatMaterial||[]),Object(i["a"])(t.topViewMaterial?[t.topViewMaterial]:[]),Object(i["a"])(t.logoMaterial?[t.logoMaterial]:[]))},fPreviewFlight:function(t){var e=this;Object(s["o"])(t).then((function(a){0===a.code?(e.previewData={pagetype:a.pagetype,adstyle:a.adstyle,bars:a.bars||[],previewUrl:"",previewBarId:a.bars&&a.bars[0]&&a.bars[0].id,advId:t},e.isPreviewDiaVisible=!0):e.$message({message:"预投放未成功，请检查关联排期包、物料是否有错！",type:"error"})}))["catch"]((function(){e.$message({message:"操作失败！",type:"error"})}))},fGoPreview:function(){var t=this,e="";this.previewData.bars.forEach((function(a){(a.id=t.previewData.previewBarId)&&(e=a.posid)}));var a=1===this.previewData.pagetype?"#adreview_".concat(this.previewData.adstyle,"_0_").concat(this.previewData.advId):"#adreview_".concat(e,"_").concat(this.previewData.previewBarId,"_").concat(this.previewData.advId),r="".concat(this.previewData.previewUrl).concat(a);window.open(r,"target"),this.isPreviewDiaVisible=!1}}},u=c,d=(a("1026"),a("2877")),p=Object(d["a"])(u,r,n,!1,null,null,null);e["a"]=p.exports},"49d1":function(t,e,a){"use strict";var r=a("6311"),n=a.n(r);n.a},"533e":function(t,e,a){},"56ab":function(t,e,a){"use strict";var r=a("14d8"),n=a.n(r);n.a},6062:function(t,e,a){"use strict";var r=a("6d61"),n=a("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},"60fe":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return s}));var r={1:"图片",2:"FLASH",3:"视频",4:"代码",5:"移动端静态图片",6:"广告选择器",7:"文字链",9:"OTT视频",10:"镜像文件",12:"h5",13:"OTT图片",20:"apk",21:"zip"},n={"01":"BJ","02":"SH","03":"GZ"},i={0:"自定义",1:"全周期",2:"By Day",3:"By Minute"},o={1:"售卖",2:"配送",3:"补偿",4:"推广",5:"补量"},s=[{datavalue:"",dataname:"请选择"},{datavalue:3,dataname:"3s"},{datavalue:4,dataname:"4s"},{datavalue:5,dataname:"5s"},{datavalue:8,dataname:"8s"},{datavalue:10,dataname:"10s"},{datavalue:15,dataname:"15s"},{datavalue:20,dataname:"20s"},{datavalue:30,dataname:"30s"},{datavalue:40,dataname:"40s"},{datavalue:45,dataname:"45s"},{datavalue:60,dataname:"60s"},{datavalue:75,dataname:"75s"}]},6311:function(t,e,a){},"641d":function(t,e,a){"use strict";var r=a("f3c4"),n=a.n(r);n.a},6566:function(t,e,a){"use strict";var r=a("9bf2").f,n=a("7c73"),i=a("e2cc"),o=a("0366"),s=a("19aa"),l=a("2266"),c=a("7dd0"),u=a("2626"),d=a("83ab"),p=a("f183").fastKey,f=a("69f3"),m=f.set,b=f.getterFor;t.exports={getConstructor:function(t,e,a,c){var u=t((function(t,r){s(t,u,e),m(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=r&&l(r,t[c],t,a)})),f=b(e),h=function(t,e,a){var r,n,i=f(t),o=g(t,e);return o?o.value=a:(i.last=o={index:n=p(e,!0),key:e,value:a,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=o),r&&(r.next=o),d?i.size++:t.size++,"F"!==n&&(i.index[n]=o)),t},g=function(t,e){var a,r=f(t),n=p(e);if("F"!==n)return r.index[n];for(a=r.first;a;a=a.next)if(a.key==e)return a};return i(u.prototype,{clear:function(){var t=this,e=f(t),a=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete a[r.index],r=r.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,a=f(e),r=g(e,t);if(r){var n=r.next,i=r.previous;delete a.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),a.first==r&&(a.first=n),a.last==r&&(a.last=i),d?a.size--:e.size--}return!!r},forEach:function(t){var e,a=f(this),r=o(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:a.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),i(u.prototype,a?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return h(this,0===t?0:t,e)}}:{add:function(t){return h(this,t=0===t?0:t,t)}}),d&&r(u.prototype,"size",{get:function(){return f(this).size}}),u},setStrong:function(t,e,a){var r=e+" Iterator",n=b(e),i=b(r);c(t,e,(function(t,e){m(this,{type:r,target:t,state:n(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,a=t.last;while(a&&a.removed)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==e?{value:a.key,done:!1}:"values"==e?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(e)}}},"65b1":function(t,e,a){"use strict";var r=a("30f5"),n=a.n(r);n.a},"6d61":function(t,e,a){"use strict";var r=a("23e7"),n=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("f183"),l=a("2266"),c=a("19aa"),u=a("861d"),d=a("d039"),p=a("1c7e"),f=a("d44e"),m=a("7156");t.exports=function(t,e,a){var b=-1!==t.indexOf("Map"),h=-1!==t.indexOf("Weak"),g=b?"set":"add",v=n[t],y=v&&v.prototype,w=v,I={},x=function(t){var e=y[t];o(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!u(t))&&e.call(this,0===t?0:t)}:function(t,a){return e.call(this,0===t?0:t,a),this})};if(i(t,"function"!=typeof v||!(h||y.forEach&&!d((function(){(new v).entries().next()})))))w=a.getConstructor(e,t,b,g),s.REQUIRED=!0;else if(i(t,!0)){var k=new w,j=k[g](h?{}:-0,1)!=k,_=d((function(){k.has(1)})),C=p((function(t){new v(t)})),S=!h&&d((function(){var t=new v,e=5;while(e--)t[g](e,e);return!t.has(-0)}));C||(w=e((function(e,a){c(e,w,t);var r=m(new v,e,w);return void 0!=a&&l(a,r[g],r,b),r})),w.prototype=y,y.constructor=w),(_||S)&&(x("delete"),x("has"),b&&x("get")),(S||j)&&x(g),h&&y.clear&&delete y.clear}return I[t]=w,r({global:!0,forced:w!=v},I),f(w,t),h||a.setStrong(w,t,b),w}},7698:function(t,e,a){"use strict";var r=a("864c"),n=a.n(r);n.a},7878:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return l}));a("99af"),a("4160"),a("a15b"),a("d81d"),a("ac1f"),a("1276"),a("159b");var r=a("5530"),n=a("ed08");function i(t){var e=t.map((function(t){var e=Object(r["a"])({},t);return null==e.cname||""==e.cname?(e.result=e.nname,e.data=e.nname):(e.result=e.cname,e.data=e.cname),"CN"==e.ncode?e.value=e.ccode:e.value=e.ncode,e}));return e}function o(t){var e=t.hourdirect,a=t.minuteDirect;if(void 0!=e&&null!=e||(e=""),void 0!=a&&null!=a||(a=""),""==e&&""==a)return"-";var r=[];return e&&e.split(",").forEach((function(t,e){r.push(e-1)})),"小时: ".concat(r.join(","),";分钟: ").concat(a)}function s(t){return t.starttime&&t.endtime?"".concat(Object(n["d"])(t.starttime,"{y}-{m}-{d}"),"\n               ~ ").concat(Object(n["d"])(t.endtime,"{y}-{m}-{d}")):""}function l(t){var e="0";return null!=t.allcount&&(e=t.allcount),null!=t.mendBookpackages&&(e+="&nbsp;<span class='green_tip'>"+t.allMendcount+"</span>"),e}},"7c3a":function(t,e,a){},8447:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"copy-outer-dia",attrs:{title:"复制广告组",visible:t.bIsVisible,width:"1000px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[a("top-search-bar",{ref:"searchRef",attrs:{config:t.searchItems},on:{fSearch:t.fSearchProject,operate:t.fOperate}}),a("pagination-pro",{ref:"pageCopyRef",staticClass:"mg-t-10 grow-1",attrs:{method:"post",loading:t.bIsLoading,autoload:!1,fullsize:!0,"page-size":15,url:"/d/bookpkg/listCopyBps",params:t.searchObject},on:{"update:loading":function(e){t.bIsLoading=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.bIsLoading,expression:"bIsLoading"}],attrs:{data:r,height:"360px",border:""},on:{"selection-change":t.fSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._l(t.columns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[e.link?a("router-link",{staticClass:"link",attrs:{to:{path:e.link+"/"+n.id}}},[t._v(" "+t._s(t._f("render")(n,e))+" ")]):a("span",[t._v(t._s(t._f("render")(n,e)))])]}}],null,!0)},"el-table-column",e,!1))}))],2)]}}])})],1)},n=[],i=(a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("5530")),o=a("60fe"),s=a("7878"),l=a("46f1"),c=a("1b62"),u=a("2ef0"),d=a("bbf6"),p={mixins:[c["c"]],components:{TopSearchBar:l["a"]},inject:["routerRefresh"],data:function(){return{searchItems:{labelWidth:"75px",searchItems:[{type:"Input",prop:"projectNumber",formItemAttrs:{label:"执行单号",rules:[{required:!0,message:"请填写执行单号！",trigger:"blur"}]},attrs:{clearable:!0,style:"width:180px"}},{type:"Input",prop:"bpid",formItemAttrs:{label:"主包ID","label-width":"50px"},attrs:{clearable:!0,style:"width:150px"}},{type:"Input",prop:"groupSuffix",formItemAttrs:{label:"广告组后缀"},attrs:{clearable:!0,style:"width:150px"}}],searchButtons:[{name:"搜索"},{name:"确认",valid:!0},{name:"取消",type:"info"}]},columns:[{prop:"id",label:"ID","min-width":90},{prop:"bpid",label:"排期包ID","min-width":90},{prop:"pkgname",label:"排期包名称","min-width":260},{prop:"cpmResourceName",label:"内容定向","min-width":200},{prop:"hdName",label:"小时/分钟定向","min-width":120,formatter:s["d"]},{prop:"areaName",label:"地域定向","min-width":120},{prop:"duration",label:"广告时长","min-width":90,filter:"secondFilter"},{prop:"adStyleName",label:"广告形式","min-width":120},{prop:"saletypeName",label:"售卖方式","min-width":120},{prop:"note",label:"备注","min-width":120},{prop:"timearea",label:"投放时间","min-width":200,formatter:s["c"]},{prop:"allcount",label:"预定量","min-width":90,formatter:s["a"]},{prop:"usetypeName",label:"使用属性","min-width":80,formatter:function(t){return o["d"][t.usetype]||"未知"}}],bIsLoading:!1,searchObject:{projectNumber:"",groupSuffix:""},selectRows:[]}},props:{value:{type:Boolean,default:!1},adgroups:{type:Array,default:function(){return[]}}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{fReload:function(){var t=this;this.$nextTick((function(){t.$refs.pageCopyRef.fReload()}))},fOperate:function(t){switch(t.name){case"确认":this.fCoppyOutter();break;case"取消":this.bIsVisible=!1;break}},fSearchProject:function(t){this.searchObject=Object(i["a"])({},Object(u["omit"])(t,"groupSuffix")),(this.searchObject.projectNumber||this.searchObject.bpid)&&this.fReload()},fSelectChange:function(t){this.selectRows=t},fCoppyOutter:function(){var t=this;if(this.selectRows.length<1)this.$message({message:"跨单复制至少需要选择一个排期包进行复制广告组关联!",type:"warning"});else if(this.fCheckAdstyleAndPlat())this.$message({message:"跨单复制需要选择相同的平台和广告形式!",type:"warning"});else{var e=this.selectRows.map((function(t){return t.id}));Object(d["i"])({bpids:e.join(","),projectNumber:this.searchObject.projectNumber,groupId:this.adgroups[0]&&this.adgroups[0].id,groupSuffix:this.searchObject.groupSuffix}).then((function(e){t.bIsVisible=!1,0===e.status?t.$message({message:"复制成功",type:"success"}):t.$message({message:e.message||"新建失败",type:"error"})}))}},fCheckAdstyleAndPlat:function(){var t=new Set,e=new Set;return this.selectRows.forEach((function(a){t.add(a.plat),e.add(a.adStyle)})),t.size>1||e.size>1}}},f=p,m=a("2877"),b=Object(m["a"])(f,r,n,!1,null,"07615273",null);e["a"]=b.exports},"845c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wraper fullsize fullsize-flex adgroup-page"},[a("top-search-bar",{ref:"searchRef",attrs:{config:t.searchItems},on:{fSearch:t.fSearch,operate:t.fOperation}},[a("template",{slot:"copy-adgroup-solt"},t._l(t.copyActionList,(function(e,r){return a("div",{key:r,staticClass:"solt-item",on:{click:function(a){return t.fTopOperationClick(e)}}},[t._v(" "+t._s(e)+" ")])})),0),a("template",{slot:"more-adgroup-solt"},t._l(t.moreActionList,(function(e,r){return a("div",{key:r,staticClass:"solt-item",on:{click:function(a){return t.fTopOperationClick(e)}}},[t._v(" "+t._s(e)+" ")])})),0),a("template",{slot:"import-adgroup-solt"},t._l(t.importActionList,(function(e,r){return a("div",{key:r,staticClass:"solt-item",on:{click:function(a){return t.fTopOperationClick(e)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{attrs:{slot:"search-right"},slot:"search-right"},[a("el-input",{attrs:{size:"small",placeholder:"按物料ID展示广告,逗号分割"},model:{value:t.maIds,callback:function(e){t.maIds=e},expression:"maIds"}})],1)],2),a("pagination-pro",{ref:"pageRef",staticClass:"mg-t-10 grow-1",attrs:{method:"post",loading:t.bIsLoading,autoload:!1,fullsize:!0,"page-size":15,url:"/d/adgroup/list",params:t.searchObject,onResponse:t.fOnResponse},on:{"update:loading":function(e){t.bIsLoading=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data,n=e.height;return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.bIsLoading,expression:"bIsLoading"}],ref:"tableRef",attrs:{data:r,height:n,"row-class-name":t.tableRowClassName,border:""},on:{"row-click":t.fChangeClickRow,select:t.fSelectionChange,"select-all":t.fSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._l(t.columns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return["name"===e.prop?a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))},on:{click:function(e){return t.fShowModifyRelated(n)}}}):e.link?a("router-link",{staticClass:"link",attrs:{to:{path:e.link+"/"+n.id}}},[t._v(" "+t._s(t._f("render")(n,e))+" ")]):a("span",{domProps:{innerHTML:t._s(t.$options.filters.render(n,e))}})]}}],null,!0)},"el-table-column",e,!1))})),a("el-table-column",{attrs:{align:"center",width:"200px",label:"组频次","class-name":"freq-column"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return t._l(r.frequencies,(function(e){return a("el-tag",{key:e.id,attrs:{closable:"",type:"info"},on:{close:function(a){return t.fDeleteFreq(r.id,e.id)}}},[t._v(" "+t._s(e.id+"-"+e.name)+" ")])}))}}],null,!0)})],2)]}}])}),a("AdvInfo",{ref:"advInfoRef"}),a("AdvAdd",{attrs:{adgroups:t.selectedRows},on:{addAdvSuccess:t.fReloadAdvInfo},model:{value:t.bIsAddAdvVisible,callback:function(e){t.bIsAddAdvVisible=e},expression:"bIsAddAdvVisible"}}),a("CopyInner",{attrs:{adgroups:t.selectedRows,projectNumber:t.projectInfo.number},model:{value:t.bIsCopyInnerVisible,callback:function(e){t.bIsCopyInnerVisible=e},expression:"bIsCopyInnerVisible"}}),a("CopyOuter",{attrs:{adgroups:t.selectedRows},model:{value:t.bIsCopyOuterVisible,callback:function(e){t.bIsCopyOuterVisible=e},expression:"bIsCopyOuterVisible"}}),a("AdnoteSet",{attrs:{adgroups:t.selectedRows},on:{reload:t.fReload},model:{value:t.bIsSetAdNoteVisible,callback:function(e){t.bIsSetAdNoteVisible=e},expression:"bIsSetAdNoteVisible"}}),a("ImportMonitor",{model:{value:t.bISImportMonitorVisible,callback:function(e){t.bISImportMonitorVisible=e},expression:"bISImportMonitorVisible"}}),a("FlightConfirm",{ref:"flightConfirmRef",attrs:{adgroups:t.selectedRows}}),a("ConflictView",{ref:"conflictViewRef",model:{value:t.bISSetConfilctVisible,callback:function(e){t.bISSetConfilctVisible=e},expression:"bISSetConfilctVisible"}}),a("RelatedBplist",{ref:"RelatedBpRef",model:{value:t.bISModifyRelatedVisible,callback:function(e){t.bISModifyRelatedVisible=e},expression:"bISModifyRelatedVisible"}}),a("RelatedFreq",{attrs:{adgroups:t.selectedRows,projectNumber:t.projectInfo.number,type:1},on:{reload:t.fReload},model:{value:t.bISRelatedFreqVisible,callback:function(e){t.bISRelatedFreqVisible=e},expression:"bISRelatedFreqVisible"}})],1)},n=[],i=a("20ce"),o=i["a"],s=(a("03f1"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,null,null);e["default"]=l.exports},"864c":function(t,e,a){},"8fa1":function(t,e,a){},"90c4":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"copy-inner-dia",attrs:{title:"复制广告组",visible:t.bIsVisible,width:"400px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[a("div",[a("label",[t._v("复制广告")]),a("el-checkbox",{model:{value:t.isCopyMaterial,callback:function(e){t.isCopyMaterial=e},expression:"isCopyMaterial"}})],1),a("div",{staticClass:"project-number"},[a("label",[t._v("执行单号")]),a("el-input",{class:{"error-no-projectnumber":!t.projectNumber},staticStyle:{width:"230px"},attrs:{size:"small",readonly:""},model:{value:t.projectNumber,callback:function(e){t.projectNumber=e},expression:"projectNumber"}})],1),a("div",[a("label",[t._v("广告组后缀")]),a("el-input",{staticStyle:{width:"230px"},attrs:{size:"small"},model:{value:t.suffix,callback:function(e){t.suffix=e},expression:"suffix"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.bIsVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{disabled:t.confirmDisabled,type:"primary",size:"small",plain:""},on:{click:t.fCoppyInner}},[t._v(" 确 定 ")])],1)])},n=[],i=(a("a15b"),a("d81d"),a("bbf6")),o={inject:["routerRefresh"],data:function(){return{isCopyMaterial:!0,suffix:"",confirmDisabled:!1}},props:{value:{type:Boolean,default:!1},adgroups:{type:Array,default:function(){return[]}},projectNumber:{type:String,default:""}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{fCoppyInner:function(){var t=this;if(this.projectNumber){this.confirmDisabled=!0;var e=this.adgroups.map((function(t){return t.id}));Object(i["h"])({agids:e.join(","),projectNumber:this.projectNumber,copymaterial:this.isCopyMaterial,groupSuffix:this.suffix}).then((function(e){t.confirmDisabled=!1,t.bIsVisible=!1,0===e.status?(t.$message({message:"复制成功",type:"success"}),t.suffix="",t.isCopyMaterial=!0,t.$router.push({path:t.$router.path,query:{ids:e.data.ids.join(",")}}),t.routerRefresh()):t.$message({message:e.message||"复制失败",type:"error"})}))}}}},s=o,l=(a("c6f4"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"6307cc97",null);e["a"]=c.exports},b58c:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"related-adgroup-dia",attrs:{title:"查看关联排期包列表",visible:t.bIsVisible,width:"1000px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[a("el-button",{staticClass:"change-related",attrs:{type:"primary",size:"mini",plain:""},on:{click:t.fChangeRealted}},[t._v("修改关联")]),a("pagination-pro",{directives:[{name:"loading",rawName:"v-loading",value:t.bIsLoading,expression:"bIsLoading"}],ref:"tableRef",staticClass:"pagination-bottom",attrs:{method:"post",autoload:!1,"page-size":15,url:"/d/bookpkg/listbygroup",params:{id:t.adgroupId},loading:t.bIsLoading},on:{"update:loading":function(e){t.bIsLoading=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[a("el-table",{staticClass:"related-table",attrs:{data:r,border:""}},t._l(t.columns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[e.link?a("router-link",{staticClass:"link",attrs:{to:{path:e.link+"/"+n.id}}},[t._v(" "+t._s(t._f("render")(n,e))+" ")]):a("span",[t._v(t._s(t._f("render")(n,e)))])]}}],null,!0)},"el-table-column",e,!1))})),1)]}}])})],1)},n=[],i=a("7878"),o=a("60fe"),s=a("1b62"),l={mixins:[s["c"]],data:function(){return{columns:[{prop:"id",label:"ID","min-width":90},{prop:"bpid",label:"排期包ID","min-width":90},{prop:"pkgname",label:"排期包名称","min-width":260},{prop:"cpmResourceName",label:"内容定向","min-width":200},{prop:"hdName",label:"小时/分钟定向","min-width":120,formatter:i["d"]},{prop:"areaName",label:"地域定向","min-width":120},{prop:"duration",label:"广告时长","min-width":90,filter:"secondFilter"},{prop:"adStyleName",label:"广告形式","min-width":120},{prop:"saletypeName",label:"售卖方式","min-width":120},{prop:"note",label:"备注","min-width":120},{prop:"timearea",label:"投放时间","min-width":200,formatter:i["c"]},{prop:"allcount",label:"预定量","min-width":90,formatter:i["a"]},{prop:"usetypeName",label:"使用属性","min-width":80,formatter:function(t){return o["d"][t.usetype]||"未知"}}],bIsLoading:!1,adgroupId:"",projectId:""}},props:{value:{type:Boolean,default:!1}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{setData:function(t,e){this.adgroupId=t,this.projectId=e,this.fReload()},fReload:function(){var t=this;this.$nextTick((function(){t.$refs.tableRef.fReload()}))},fChangeRealted:function(){this.bIsVisible=!1,this.$router.push({path:"/flight/advproject/adgroup/bplist",query:{projectid:this.projectId,adgroupid:this.adgroupId}})}}},c=l,u=(a("1dea"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,null,null);e["a"]=d.exports},bb2f:function(t,e,a){var r=a("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bb42:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"conflict-view-dia",attrs:{title:"",visible:t.bIsVisible,width:"1100px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[a("div",{staticClass:"confilct-list"},[a("top-search-bar",{ref:"searchRef",attrs:{config:t.searchItems},on:{fSearch:t.fSearch,operate:t.fOperation,fGetEmitSearchObj:t.fGetEmitSearchObj}}),a("pagination-pro",{directives:[{name:"loading",rawName:"v-loading",value:t.bIsLoading,expression:"bIsLoading"}],ref:"conflictRef",staticClass:"pagination-top",attrs:{method:"post",autoload:!1,"page-size":15,url:"/d/conflictad/list",params:t.searchObject,loading:t.bIsLoading},on:{"update:loading":function(e){t.bIsLoading=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[a("el-table",{staticClass:"conflict-table",attrs:{data:r,border:""},on:{"selection-change":t.fSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._l(t.columns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[e.link?a("router-link",{staticClass:"link",attrs:{to:{path:e.link+"/"+n.id}}},[t._v(" "+t._s(t._f("render")(n,e))+" ")]):a("span",[t._v(t._s(t._f("render")(n,e)))])]}}],null,!0)},"el-table-column",e,!1))}))],2)]}}])})],1),1===this.adgroupIds.length?a("div",{staticClass:"selected-confilct-list"},[a("div",{staticClass:"title",staticStyle:{"margin-bottom":"10px"}},[a("label",{staticStyle:{"margin-right":"15px"}},[t._v("已关联")]),a("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:t.fDelete}},[t._v("删除")])],1),a("pagination-pro",{directives:[{name:"loading",rawName:"v-loading",value:t.bIsBottomLoading,expression:"bIsBottomLoading"}],ref:"hasConflictRef",staticClass:"pagination-bottom",attrs:{method:"post",autoload:!1,"page-size":15,url:"/d/conflictad/listselected",params:t.searchConflictedObject,loading:t.bIsBottomLoading,onResponse:t.fOnConflictedResponse},on:{"update:loading":function(e){t.bIsBottomLoading=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[a("el-table",{staticClass:"conflict-table",attrs:{data:r,border:""},on:{"selection-change":t.fSelectConflictedChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._l(t.columns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[e.link?a("router-link",{staticClass:"link",attrs:{to:{path:e.link+"/"+n.id}}},[t._v(" "+t._s(t._f("render")(n,e))+" ")]):a("span",[t._v(t._s(t._f("render")(n,e)))])]}}],null,!0)},"el-table-column",e,!1))}))],2)]}}],null,!1,522710243)})],1):t._e()])},n=[],i=(a("4160"),a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("2532"),a("159b"),a("2909")),o=a("5530"),s=a("7878"),l=a("bbf6"),c=a("46f1"),u=a("1b62"),d={mixins:[u["c"]],inject:["routerRefresh"],components:{TopSearchBar:c["a"]},data:function(){return{columns:[{prop:"id",label:"广告组ID","min-width":80,formatter:function(t){return t.id||"*"}},{prop:"name",label:"广告组名称","min-width":220},{prop:"platName",label:"平台","min-width":100},{prop:"adstyleName",label:"广告形式","min-width":100},{prop:"area",label:"地域定向","min-width":160}],adgroupIds:[],projectNumber:"",searchObject:{number:""},searchConflictedObject:{},addList:[],delList:[],allConflictedId:[],bIsLoading:!1,bIsBottomLoading:!1}},props:{value:{type:Boolean,default:!1}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},searchItems:function(){return{labelWidth:"75px",searchItems:[{type:"Input",prop:"number",default:this.projectNumber,formItemAttrs:{label:"执行单号"},attrs:{clearable:!0,style:"width:200px"}},{type:"Select",prop:"adstyle",default:"",formItemAttrs:{label:"广告形式"},attrs:{placeholder:"广告形式",clearable:!0,style:"max-width:120px"},data:[{datavalue:"",dataname:"请选择"},{datavalue:"1",dataname:"前贴片"},{datavalue:"2",dataname:"中插片"}]},{type:"Select",prop:"areaCodes",default:[],formItemAttrs:{label:"地域定向"},attrs:{placeholder:"请选择",multiple:!0,filterable:!0,"collapse-tags":!0,clearable:!0,style:"max-width:180px"},listGetter:{url:"/d/area/searchArealist",params:{},keyMap:{list:"rows"},data:[],optionValue:"value",optionName:"data",filter:s["b"]}},{type:"Input",prop:"id",formItemAttrs:{label:"广告组ID"},attrs:{clearable:!0,style:"width:120px"}},{type:"Input",prop:"name",formItemAttrs:{label:"广告组名称"},attrs:{clearable:!0,style:"width:120px"}},{type:"Select",prop:"platCodes",default:[],formItemAttrs:{label:"平台","label-width":"50px"},attrs:{placeholder:"请选择",multiple:!0,"collapse-tags":!0,clearable:!0,style:"max-width:180px"},listGetter:{url:"/system/basedata/list",params:{searchDatatype:"plat"},keyMap:{list:"rows"},data:[],optionValue:"datavalue",optionName:"dataname"}},{type:"CheckBox",prop:"needCheckArea",default:"0",formItemAttrs:{label:"匹配地域 "},attrs:{"true-label":"1","false-label":"0"}}],searchButtons:[{name:"查询"},{name:"冲突所有"},{name:"设置",attrs:{disabled:0===this.addList.length}}]}}},methods:{fReload:function(){var t=this;this.$nextTick((function(){t.$refs.conflictRef.fReload()}))},fConflictedReload:function(){var t=this;this.$nextTick((function(){t.$refs.hasConflictRef.fReload()}))},setConflictData:function(t,e){this.adgroupIds=e,this.projectNumber=t,this.fSearch(),1===this.adgroupIds.length&&(this.searchConflictedObject={id:this.adgroupIds[0]},this.fConflictedReload())},fSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.searchObject=Object(o["a"])({},t,{number:this.projectNumber,areaCodes:t.areaCodes&&t.areaCodes.join(",")||""}),this.fReload()},fGetEmitSearchObj:function(t){this.searchObject=Object(o["a"])({},t,{number:this.projectNumber,areaCodes:t.areaCodes.join(",")})},fDelete:function(){this.fSaveOrUpdateConfict(this.delList,"update")},fOperation:function(t){"冲突所有"===t.name&&this.fSaveOrUpdateConfict(["*"],"add"),"设置"===t.name&&this.fSaveOrUpdateConfict(this.addList,"add")},fSaveOrUpdateConfict:function(t,e){var a=this;if("add"!==e||0!==t.length){var r={groupidstr:this.adgroupIds.join(","),idsStr:t.join(","),needCheckArea:this.searchObject.needCheckArea||0};Object(l["t"])(r,e).then((function(t){a.$message({message:t.message,type:0==t.status?"success":"error"}),0==t.status&&1===a.adgroupIds.length&&a.fConflictedReload()}))}},fSelectChange:function(t){this.addList=t.map((function(t){return t.id}))},fSelectConflictedChange:function(t){var e=this;this.delList=[];var a=Object(i["a"])(this.allConflictedId),r=t.map((function(t){return t.id}));a.forEach((function(t){r.includes(t)||e.delList.push(0==t?"*":t)}))},fOnConflictedResponse:function(t){this.allConflictedId=(t.rows||[]).map((function(t){return t.id}))}}},p=d,f=(a("2c78"),a("2877")),m=Object(f["a"])(p,r,n,!1,null,null,null);e["a"]=m.exports},bbf6:function(t,e,a){"use strict";a.d(e,"q",(function(){return n})),a.d(e,"p",(function(){return i})),a.d(e,"o",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"h",(function(){return l})),a.d(e,"i",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"r",(function(){return d})),a.d(e,"k",(function(){return p})),a.d(e,"d",(function(){return f})),a.d(e,"b",(function(){return m})),a.d(e,"m",(function(){return b})),a.d(e,"l",(function(){return h})),a.d(e,"u",(function(){return g})),a.d(e,"v",(function(){return v})),a.d(e,"g",(function(){return y})),a.d(e,"f",(function(){return w})),a.d(e,"n",(function(){return I})),a.d(e,"w",(function(){return x})),a.d(e,"t",(function(){return k})),a.d(e,"c",(function(){return j})),a.d(e,"s",(function(){return _})),a.d(e,"j",(function(){return C}));var r=a("0c6d");function n(t){return Object(r["a"])({url:"/d/advproject/list",method:"get",params:{id:t}})}function i(t){return Object(r["a"])({url:"/d/advertisement/list",method:"get",params:{groupid:t,_search:!1}})}function o(t){return Object(r["a"])({url:"/d/advflight/preview",method:"get",params:{advid:t}})}function s(t){return Object(r["a"])({url:"/d/advertisement/saveEmptyAd",method:"post",data:{saveAdBoArray:JSON.stringify(t),advids:""},dataType:"formData"})}function l(t){return Object(r["a"])({url:"/d/advertisement/copyad",method:"post",data:t,dataType:"formData"})}function c(t){return Object(r["a"])({url:"/d/advertisement/crossCopyad",method:"post",data:t,dataType:"formData"})}function u(t){return Object(r["a"])({url:"/d/adgroup/checkAdGroupStatus",method:"post",data:{adgroupIds:t},dataType:"formData"})}function d(t,e){var a={stop:"/d/advflight/stop",suspend:"/d/advflight/suspend"};return Object(r["a"])({url:a[t],method:"get",params:{groupids:e}})}function p(t){return Object(r["a"])({url:"/d/adgroup/del",method:"post",data:t,dataType:"formData"})}function f(t){return Object(r["a"])({url:"/d/conflictad/cancel",method:"post",data:{idsStr:t},dataType:"formData"})}function m(t){return Object(r["a"])({url:"/d/adgroup/updateAdNote",method:"post",data:t,dataType:"formData"})}function b(t){return Object(r["a"])({url:"/d/advertisement/exportMonitorData",method:"post",data:{advids:t},dataType:"formData"})}function h(t){return Object(r["a"])({url:"/d/advertisement/downloadTemplate",method:"post",data:{advids:t},dataType:"formData"})}function g(){return Object(r["a"])({url:"/d/advertisement/viladateMonitorData",method:"post",dataType:"formData"})}function v(){return Object(r["a"])({url:"/d/advertisement/saveData",method:"post",data:{changeFlag:!1},dataType:"formData"})}function y(t){return Object(r["a"])({url:"/d/advertisement/check4flight",method:"post",data:{adgids:t},dataType:"formData"})}function w(t){return Object(r["a"])({url:"/d/advflight/getAdvGroupSameBpk",method:"post",data:{groupids:t},dataType:"formData"})}function I(t){return Object(r["a"])({url:"/d/advflight/flight",method:"get",params:{groupids:t}})}function x(t){return Object(r["a"])({url:"/d/advflight/setConflictAdGroup",method:"post",data:{adgroupArray:JSON.stringify(t)},dataType:"formData"})}function k(t,e){var a={update:"/d/conflictad/updateconflict",add:"/d/conflictad/addconflict"};return Object(r["a"])({url:a[e],method:"post",data:t,dataType:"formData"})}function j(t){return Object(r["a"])({url:"/d/frequencty/save",method:"post",data:t,dataType:"formData"})}function _(t,e){return Object(r["a"])({url:"/d/adgroup/batchUpdateGroupFreqs",method:"post",data:{adGroupIds:t,freqIds:e},dataType:"formData"})}function C(t,e){return Object(r["a"])({url:"/d/adgroup/delGroupFrequencyByGidAndFid",method:"post",data:{gid:t,freqId:e},dataType:"formData"})}},c0fe:function(t,e,a){},c512:function(t,e,a){"use strict";var r=a("0334"),n=a.n(r);n.a},c6f4:function(t,e,a){"use strict";var r=a("1860"),n=a.n(r);n.a},c751:function(t,e,a){"use strict";var r=a("345a"),n=a.n(r);n.a},da04:function(t,e,a){"use strict";var r=a("c0fe"),n=a.n(r);n.a},da63:function(t,e,a){},ddbc:function(t,e,a){"use strict";var r=a("533e"),n=a.n(r);n.a},e85d:function(t,e,a){"use strict";var r=a("f42d"),n=a.n(r);n.a},f183:function(t,e,a){var r=a("d012"),n=a("861d"),i=a("5135"),o=a("9bf2").f,s=a("90e3"),l=a("bb2f"),c=s("meta"),u=0,d=Object.isExtensible||function(){return!0},p=function(t){o(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},f=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,c)){if(!d(t))return"F";if(!e)return"E";p(t)}return t[c].objectID},m=function(t,e){if(!i(t,c)){if(!d(t))return!0;if(!e)return!1;p(t)}return t[c].weakData},b=function(t){return l&&h.REQUIRED&&d(t)&&!i(t,c)&&p(t),t},h=t.exports={REQUIRED:!1,fastKey:f,getWeakData:m,onFreeze:b};r[c]=!0},f3c4:function(t,e,a){},f42d:function(t,e,a){},f5a9:function(t,e,a){},f918:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"relate-freq-dia",attrs:{title:"关联频次",visible:t.bIsVisible,width:"1000px"},on:{"update:visible":function(e){t.bIsVisible=e}}},[a("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabList,(function(e,r){return a("el-tab-pane",{key:r,attrs:{label:e.name,name:e.prop}},[a(e.prop,{tag:"component",attrs:{adgroups:t.adgroups,projectNumber:t.projectNumber},on:{reload:t.fReload}})],1)})),1)],1)},n=[],i=(a("a9e3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("create-view",{staticClass:"create-freq-wraper",attrs:{formItems:t.formItems,buttons:t.buttons,"label-position":"right","label-width":"120px"},on:{submit:t.fSubmit},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})}),o=[],s=(a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("5530")),l=(a("96cf"),a("1da1")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-view-wrap"},[a("el-form",t._b({ref:"form",attrs:{model:t.data,disabled:"view"===t.action}},"el-form",t.$attrs,!1),[a("el-row",t._l(t._formItems||[],(function(e,r){return a("el-col",{key:r,attrs:{span:e.span||24}},[a("el-form-item",t._b({attrs:{prop:e.prop}},"el-form-item",e.formItemAttrs,!1),["Slot"===e.type?t._t(e.prop):a(e.type,{tag:"component",attrs:{config:e},model:{value:t.data[e.prop],callback:function(a){t.$set(t.data,e.prop,a)},expression:"data[item.prop]"}})],2)],1)})),1)],1),a("operation-buttons",{attrs:{buttons:t.operationBtns,align:"center"},on:{operate:t.fOperation}})],1)},u=[],d=(a("4de4"),a("4160"),a("a434"),a("b0c0"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-cascader",t._b({directives:[{name:"list-getter",rawName:"v-list-getter",value:t.listGetterConfig,expression:"listGetterConfig"}],ref:t.config.prop,staticClass:"create_view_cascader",attrs:{options:t.dataList},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},"el-cascader",t.config.attrs,!1))}),p=[],f=(a("99af"),{name:"Cascader",props:{value:{type:[Object,String,Array]},config:{type:Object,default:function(){return{type:"Cascader",prop:"cascader",formItemAttrs:{label:"cascader",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{placeholder:"请输入",clearable:!0,separator:"/",props:{multiple:!0}},listGetter:{url:"/basemappings",params:{datatype:"plat"},keyMap:{list:"data"},data:[],optionValue:"map_value",optionName:"map_name",optionValueUseIndex:!0}}}}},computed:{model:{get:function(){return this.value||this.config["default"]},set:function(t){this.$emit("input",t)}},dataList:function(){var t=this.config.listGetter;return t?t.data:this.config.data||[]},listGetterConfig:function(){var t=this.config.listGetter;return t?Object(s["a"])({},t,{ref:this.config.prop,filter:this.Ffilter}):null}},methods:{Ffilter:function(t){var e=this.config.listGetter,a=function t(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a.map((function(a,n){var i=a[e.optionValue||"datavalue"];if(e.optionValueUseIndex){var o=++n;i=a.index?a.index:"".concat(o<10?"0".concat(o):o)}var s=r?"".concat(r,"-").concat(i):i;return{value:s,label:a[e.optionName||"dataname"],children:a.child?t(a.child,s):null}}))},r=e&&e.filter?e.filter(t):t,n=a(r);return n}}}),m=f,b=(a("c751"),a("2877")),h=Object(b["a"])(m,d,p,!1,null,null,null),g=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-input",t._b({staticClass:"create_view_input",model:{value:t.model,callback:function(e){t.model="string"===typeof e?e.trim():e},expression:"model"}},"el-input",t.config.attrs,!1),[t.config.attrs&&t.config.attrs.append?a("template",{slot:"append"},[t._v(t._s(t.config.attrs.append))]):t._e()],2)},y=[],w={name:"Input",props:{value:{type:[String,Number],default:""},config:{type:Object,default:function(){return{type:"Input",prop:"input",append:"",formItemAttrs:{label:"input",rules:[{required:!0,message:"请输入input类型",trigger:"blur"}]},attrs:{placeholder:"请输入",clearable:!0}}}}},computed:{model:{get:function(){return this.value||this.config["default"]},set:function(t){this.$emit("input",t)}}}},I=w,x=(a("1081"),Object(b["a"])(I,v,y,!1,null,"55792b94",null)),k=x.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create_view_multiinput"},t._l(t.model,(function(e,r){return a("el-input",t._b({key:r,model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},"el-input",t.config.attrs,!1),[t.config.select?a("select-component",{attrs:{slot:"prepend",config:t._f("selectFilter")(t.config.select,r)},slot:"prepend",model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"item.select"}}):t._e(),a("el-button",{attrs:{slot:"append",icon:0===r?"el-icon-circle-plus-outline":"el-icon-delete",type:"danger",circle:""},on:{click:function(e){return t.fAddNew(r)}},slot:"append"})],1)})),1)},_=[],C=a("2909"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",t._b({directives:[{name:"list-getter",rawName:"v-list-getter",value:t.listGetterConfig,expression:"listGetterConfig"}],ref:t.config.prop,staticClass:"create_view_select",model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},"el-select",t.config.attrs,!1),t._l(t.dataList,(function(e,r){return a("el-option",{key:r,attrs:{disabled:e.disabled,label:t.config.listGetter&&t.config.listGetter.optionName?e[t.config.listGetter.optionName]:e.dataname,value:t.config.listGetter&&t.config.listGetter.optionValue?e[t.config.listGetter.optionValue]:e.datavalue}})})),1)},O=[],R={name:"Select",props:{value:{type:[Array,String],default:function(){return[]}},config:{type:Object,default:function(){return{type:"Select",prop:"select",formItemAttrs:{label:"select",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{placeholder:"请输入",clearable:!0},listGetter:{url:"/basemappings",params:{datatype:"plat"},keyMap:{list:"data"},data:[],optionValue:"map_value",optionName:"map_name"}}}}},computed:{model:{get:function(){return this.value||this.config["default"]},set:function(t){this.$emit("input",t)}},dataList:function(){var t=this.config.listGetter;return t?t.data:this.config.data},listGetterConfig:function(){var t=this.config.listGetter;return t?Object(s["a"])({},t,{ref:this.config.prop}):null}}},A=R,$=(a("641d"),Object(b["a"])(A,S,O,!1,null,null,null)),D=$.exports,N={name:"MultiInput",components:{SelectComponent:D},data:function(){return{}},props:{value:{type:Array},config:{type:Object,default:function(){return{type:"MultiInput",prop:"multiInput",formItemAttrs:{label:"multiInput",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{style:"width: 550px"},select:{type:"Select",prop:"select",formItemAttrs:{label:"select",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{placeholder:"请输入",clearable:!0,style:"width: 150px"},listGetter:{url:"/basemappings",params:{datatype:"plat"},keyMap:{list:"data"},data:[],optionValue:"map_value",optionName:"map_name"}}}}}},computed:{model:{get:function(){return this.value||[]},set:function(t){this.$emit("input",t)}}},filters:{selectFilter:function(t,e){return Object(s["a"])({},t,{prop:t.prop+e})}},mounted:function(){0===this.model.length&&this.fAddNew(0)},methods:{fAddNew:function(t){if(0===t){if(this.model.length>=(this.config.length||5))return;this.model=[].concat(Object(C["a"])(this.model),[{value:this.config["default"]||"",select:this.config.select&&this.config.select["default"]||""}])}else this.model.splice(t,1),this.model=Object(C["a"])(this.model)}}},V=N,G=(a("c512"),Object(b["a"])(V,j,_,!1,null,null,null)),L=G.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create_view_radio"},t._l(t.config.data,(function(e){return a("el-radio",t._b({key:e.value,attrs:{label:e.value},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},"el-radio",t.config.attrs,!1),[t._v(" "+t._s(e.text)+" ")])})),1)},q=[],T={name:"Radio",props:{value:{type:[Number,Boolean,String],default:null},config:{type:Object,default:function(){return{type:"Radio",prop:"radio",formItemAttrs:{label:"radio",rules:[{required:!0,message:"请输入",trigger:"blur"}]},data:[{text:"是",value:0},{text:"否",value:1}]}}}},computed:{model:{get:function(){return this.value||this.config["default"]},set:function(t){this.$emit("input",t)}}}},F=T,B=(a("65b1"),Object(b["a"])(F,M,q,!1,null,null,null)),E=B.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-checkbox",t._b({model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},"el-checkbox",t.config.attrs,!1),[t._v(t._s(t.config.attrs&&t.config.attrs.title||""))])},P=[],U={props:{value:{type:[Boolean,Number,String],default:!1},config:{type:Object,default:function(){return{type:"CheckBox",prop:"CheckBox",formItemAttrs:{label:"",rules:[{required:!0,message:"",trigger:"blur"}]},attrs:{}}}}},computed:{model:{get:function(){return this.value||this.config["default"]},set:function(t){this.$emit("input",t)}}}},H=U,K=(a("2f1d"),Object(b["a"])(H,z,P,!1,null,null,null)),J=K.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-checkbox-group",t._b({directives:[{name:"list-getter",rawName:"v-list-getter",value:t.listGetterConfig,expression:"listGetterConfig"}],ref:t.config.prop,staticClass:"create_view_checkbox",model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},"el-checkbox-group",t.config.attrs,!1),t._l(t.dataList,(function(e,r){return a("el-checkbox",{key:r,attrs:{label:t.config.listGetter&&t.config.listGetter.optionName?e[t.config.listGetter.optionName]:e.dataname}})})),1)},Q=[],X=(a("caad"),a("a15b"),a("b64b"),a("07ac"),a("2532"),a("4795"),a("ed08")),Z=a("2ef0"),Y={name:"CheckBoxGroup",data:function(){return{listKeyMap:{}}},props:{value:{type:[Object,Array],default:function(){return[]}},config:{type:Object,default:function(){return{type:"CheckBoxGroup",prop:"CheckBoxGroup",needKeyValue:!0,formItemAttrs:{label:"CheckBoxGroup",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{placeholder:"请输入",clearable:!0,separator:"/",props:{multiple:!0}},listGetter:{url:"/basemappings",params:{datatype:"plat"},keyMap:{list:"data"},data:[],optionValue:"map_value",optionName:"map_name",optionValueUseIndex:!0}}}}},computed:{model:{get:function(){return Object(Z["isObject"])(this.value)?Object.values(this.value||{}):this.value},set:function(t){var e=this;if(this.config.needKeyValue){var a={};t.forEach((function(t){Object.keys(e.listKeyMap).includes(t)&&(a[e.listKeyMap[t]]=t)})),this.$emit("input",a)}else this.$emit("input",t)}},dataList:function(){var t=this.config.listGetter;return t?t.data:this.config.data},listGetterConfig:function(){var t=this.config.listGetter;return t?Object(s["a"])({},t,{ref:this.config.prop,filter:this.Ffilter}):null}},watch:{model:function(t){this.config["default"]&&t.join()===this.config["default"].join()&&this.fRestModel()}},created:function(){this.config.data&&this.Ffilter(this.config.data)},methods:{Ffilter:function(t){var e=this.config.listGetter&&this.config.listGetter.filter?this.config.listGetter.filter(t):t;return this.listKeyMap=Object(X["c"])({list:e,keyname:this.config.listGetter&&this.config.listGetter.optionName?this.config.listGetter.optionName:"dataname",valueName:this.config.listGetter&&this.config.listGetter.optionValue?this.config.listGetter.optionValue:"datavalue"}),this.fRestModel(),e},fRestModel:function(){var t=this;0!==Object.keys(this.listKeyMap).length&&setTimeout((function(){if(!t.config.directVal){var e=Object(X["e"])(t.listKeyMap),a=t.model.map((function(t){return e[t]})).filter((function(t){return!!t}));t.model=Object(C["a"])(a)}}),200)}}},tt=Y,et=Object(b["a"])(tt,W,Q,!1,null,null,null),at=et.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-date-picker",t._b({staticClass:"create_view_datapick",model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},"el-date-picker",t.config.attrs,!1))},nt=[],it={name:"DataPicker",props:{value:{type:[String,Array],default:""},config:{type:Object,default:function(){return{type:"DataPicker",prop:"dataPicker",formItemAttrs:{label:"dataPicker",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{clearable:!0,type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"}}}}},computed:{model:{get:function(){return this.value||this.config["default"]},set:function(t){this.$emit("input",t)}}}},ot=it,st=Object(b["a"])(ot,rt,nt,!1,null,null,null),lt=st.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",t._b({staticClass:"create_view_uploadfile",attrs:{action:"","http-request":t.fUploadRequest,"show-file-list":!1}},"el-upload",t.config.attrs,!1),[a("el-button",{staticClass:"upload-btn",attrs:{size:"small",plain:""}},[t._v("选择文件")]),t.fileName?a("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.fileName))]):t._e()],1)},ut=[],dt=(a("ac1f"),a("1276"),"http://10.16.19.32:9300/upload/file"),pt={name:"FileUpload",props:{value:{type:String,default:""},config:{type:Object,default:function(){return{type:"FileUpload",prop:"fileUpload",formItemAttrs:{label:"fileUpload",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{uploadUrl:"",allowFileTypes:"",maxSize:""}}}}},data:function(){return{fileName:this.model}},watch:{value:function(t){t||(this.fileName="")}},computed:{model:{get:function(){return this.value||this.config["default"]},set:function(t){t||(this.fileName=""),this.$emit("input",t)}}},methods:{fUploadRequest:function(t){var e=this,a=this.config.attrs,r=a&&a.uploadUrl||dt,n=a&&a.allowFileTypes,i=a&&a.maxSize,o=t.file,s=o.name.split("."),l=s[s.length-1];if(!n||n.includes(l))if(i&&o.size/1024/1024/i>1)this.$message.error("上传图片体积不能大于".concat(i,"MB"));else{var c=new FormData;c.append("file",o);var u=new XMLHttpRequest;u.open("put",r,!0),u.onload=function(){var t=JSON.parse(u.response);200===t.code&&t.data&&(e.fileName=o.name,e.model=t.data.url)},u.onerror=function(){e.$message.error("上传过程中发生错误请重新上传～")},u.send(c)}else this.$message.error("请上传".concat(n.join(","),"类型文件～"))}}},ft=pt,mt=(a("56ab"),Object(b["a"])(ft,ct,ut,!1,null,"2f951d92",null)),bt=mt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{directives:[{name:"list-getter",rawName:"v-list-getter",value:t.listGetterConfig,expression:"listGetterConfig"}],ref:t.config.prop,staticClass:"create_view_tablebox",attrs:{data:t.dataList,border:""},on:{"selection-change":t.handleSelectionChange}},[t.config.attrs.showSelection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._l(t.config.columns,(function(e){return a("el-table-column",t._b({key:e.prop,attrs:{align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[t._v(" "+t._s(t._f("render")(r,e))+" ")]}}],null,!0)},"el-table-column",e,!1))}))],2)},gt=[],vt={name:"CheckBox",data:function(){return{listKeyMap:{}}},props:{value:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{type:"Table",prop:"table",formItemAttrs:{label:"table",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{showSelection:!0},columns:[{prop:"map_name",label:"DSP名称","min-width":120},{prop:"map_value",label:"可用流量百分比","min-width":120}],listGetter:{url:"/basemappings",params:{datatype:"plat"},keyMap:{list:"data"},data:[],optionValue:"map_value",optionName:"map_name",optionValueUseIndex:!0}}}}},computed:{model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},dataList:function(){var t=this.config.listGetter;return t?t.data:this.config.data},listGetterConfig:function(){var t=this.config.listGetter;return t?Object(s["a"])({},t,{ref:this.config.prop,filter:this.Ffilter}):null}},watch:{model:function(t){this.config["default"]&&t.join()===this.config["default"].join()&&this.$refs[this.config.prop].clearSelection()}},created:function(){this.config.dataList&&this.Ffilter(this.config.dataList)},methods:{handleSelectionChange:function(t){var e=this,a=this.config.handleSelectFilter?this.config.handleSelectFilter(t):t;a=a.map((function(t){return t[e.config.listGetter.optionValue]})),this.model=a},Ffilter:function(t){var e=this,a=this.config.listGetter&&this.config.listGetter.filter?this.config.listGetter.filter(t):t;return a.forEach((function(t){var a=t[e.config.listGetter.optionValue];e.listKeyMap[a]=t})),setTimeout((function(){e.value.forEach((function(t){var a=e.listKeyMap[t];a&&e.$refs[e.config.prop].toggleRowSelection(a,!0)}))}),200),a}}},yt=vt,wt=Object(b["a"])(yt,ht,gt,!1,null,"147722ca",null),It=wt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"section-title"},[t._v(t._s(t.config.title))])},kt=[],jt={name:"Section",props:{config:{type:Object,default:function(){return{type:"Section",title:"第一部分"}}}}},_t=jt,Ct=(a("e85d"),Object(b["a"])(_t,xt,kt,!1,null,"759d590c",null)),St=Ct.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create_view_tag"},[t._l(t.model,(function(e,r){return a("el-tag",t._b({key:r,on:{close:function(a){return t.handleClose(e)}}},"el-tag",t.config.attrs,!1),[t._v(" "+t._s(e)+" ")])})),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v(" "+t._s("+"+t.config.addName||!1)+" ")])],2)},Rt=[],At=(a("c975"),{name:"Tag",props:{value:{type:Array},config:{type:Object,default:function(){return{type:"Tag",prop:"tag",addName:"添加",formItemAttrs:{label:"tag",rules:[{required:!0,message:"请输入",trigger:"blur"}]},attrs:{closable:!0,"disable-transitions":!1}}}}},data:function(){return{inputVisible:!1,inputValue:""}},computed:{model:{get:function(){return this.value||[]},set:function(t){this.$emit("input",t)}}},mounted:function(){0===this.model.length&&(this.model=[])},methods:{handleClose:function(t){this.model.splice(this.model.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;t&&this.model.push(t),this.inputVisible=!1,this.inputValue=""}}}),$t=At,Dt=(a("ddbc"),Object(b["a"])($t,Ot,Rt,!1,null,null,null)),Nt=Dt.exports,Vt=a("4159"),Gt=a("1b62"),Lt={name:"createView",mixins:[Gt["b"]],components:{Cascader:g,Input:k,MultiInput:L,Select:D,Radio:E,CheckBox:J,CheckBoxGroup:at,DataPicker:lt,FileUpload:bt,Table:It,Section:St,Tag:Nt,OperationButtons:Vt["a"]},props:{value:{type:Object},formItems:{type:Array},buttons:{type:Array},showSaveLoding:{type:Boolean},isClear:{type:Boolean,default:!0}},data:function(){return{action:this.$route.meta.action}},computed:{data:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},_formItems:function(){var t=this,e=this.formItems.filter((function(t){return!t.hidden}));return e.map((function(e){return t.computeFormItem(e,t.data)})).filter((function(t){return t._ifRender}))},operationBtns:function(){return this.buttons?this.buttons:[{name:"返回"},{name:"保存"},{name:"修改",hidden:"view"!==this.action||!this.editLink}]}},created:function(){("create"===this.action||this.isClear)&&this.fClear()},methods:{computeFormItem:function(t,e){var a=Object(s["a"])({},t);return a.getAttrs&&(a.attrs=Object.assign(a.attrs,a.getAttrs(e))),a._ifRender=!a.ifRender||a.ifRender(e),a},fOperation:function(t){switch(t.name){case"返回":this.$router.back();break;case"保存":this.fSubmit();break;case"修改":this.$router.push(this.editLink||"");break;case"重置":this.fClear();break;default:this.$emit("operate",t.name);break}},fSubmit:function(){var t=this;if(this.showSaveLoding){var e="",a="";this.operationBtns.forEach((function(t,r){"保存"===t.name&&(e=r,a=t)}));var r=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a.disabled=r,a.icon=n,t.operationBtns.splice(e,1,a)};this.fVelidateForm(this.$refs.form,(function(){r(!0,"el-icon-loading"),t.$emit("submit",(function(){r(!1)}))}))}else this.fVelidateForm(this.$refs.form,(function(){t.$emit("submit")}))},fClear:function(){var t=this,e={};this.formItems.forEach((function(a){if(a.noReset)return!1;var r="";switch(a.type){case"Cascader":case"CheckBoxGroup":case"Table":case"Tag":r=a["default"]||[];break;case"Area":r=a["default"]||{includeList:[],excludeList:[]};break;case"Radio":case"CheckBox":r=null===a["default"]?0:a["default"];break;case"Select":r=t.fGetSelectdefault(a);break;case"MultiInput":r=[{value:a["default"]||"",select:a.select["default"]||""}];break;default:r=a["default"]||"";break}var n=t.data[a.prop];"create"===t.action||t.isClear?e[a.prop]=r:e[a.prop]=null===n||""===n?r:n})),this.data=Object(s["a"])({},e)},fGetSelectdefault:function(t){var e=t.listGetter?t.listGetter.dataList:t.dataList||[],a=t.listGetter&&t.listGetter.optionValue||"datavalue",r=e[0]&&e[0][a];return t["default"]?t["default"]:t.autoDefault&&e.length>0?t.multiple?[r]:r:t.multiple?[]:""}}},Mt=Lt,qt=(a("da04"),Object(b["a"])(Mt,c,u,!1,null,null,null)),Tt=qt.exports,Ft=a("bbf6"),Bt={components:{CreateView:Tt},data:function(){return{buttons:[{name:"保存"},{name:"重置",attrs:{type:"info"}}],data:{},projectId:this.$route.params.projectid}},computed:{formItems:function(){var t=this.adgroups&&this.adgroups[0]&&this.adgroups[0].bartemplet&&this.adgroups[0].bartemplet.pagetype;return[{type:"Input",prop:"name",formItemAttrs:{label:"频次名称",rules:[{required:!0,message:"请输入合法的频次名称！",trigger:"blur"}]},attrs:{clearable:!0,size:"mini",style:"width: 200px"}},{type:"Radio",prop:"type",default:1,formItemAttrs:{label:"频次类型"},data:[{text:"全周期",value:1},{text:"分钟",value:2},{text:"天",value:3}]},{type:"Input",prop:"duration",formItemAttrs:{label:"频控周期",rules:[{required:!0,message:"频空周期必填",trigger:"blur"}]},attrs:{clearable:!0,type:"number",style:"width: 120px"},ifRender:function(t){return t.type&&1!=t.type}},{type:"Input",prop:"number",formItemAttrs:{label:"控频次数",rules:[{required:!0,message:"频空次数必填",trigger:"blur"}]},attrs:{clearable:!0,type:"number",min:0,style:"width: 120px"}},{type:"CheckBox",prop:"isAddFrequency",default:"",formItemAttrs:{label:"追投 "},attrs:{"true-label":"1","false-label":""}},{type:"Input",prop:"addFrequencyNum",formItemAttrs:{label:"追投次数",rules:[{required:!0,message:"追投次数必填",trigger:"blur"}]},attrs:{clearable:!0,type:"number",min:0,style:"width: 120px"},ifRender:function(t){return 1==t.isAddFrequency}},{type:"DataPicker",prop:"time",formItemAttrs:{label:"起止日期"},attrs:{clearable:!0,type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",style:"width: 260px"}},{type:"Select",prop:"pageType",default:t,formItemAttrs:{label:"页面类型"},attrs:{style:"width: 200px"},data:[{datavalue:"1",dataname:"播放器",disabled:"2"===t},{datavalue:"2",dataname:"页面",disabled:"1"===t}]}]}},props:{adgroups:{type:Array,default:function(){return[]}},type:{type:Number,default:1}},methods:{fSubmit:function(){var t=this;this.data.number>10?this.$confirm("控频次数大于10，请确认保存","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.fSaveFreq()})):this.fSaveFreq()},fSaveFreq:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r,n,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.adgroups[0].plat,r=t.adgroups.map((function(){var e=t.data.time||[],r=Object(s["a"])({},t.data,{plat:a,ftype:3==t.type?2:1,projectid:t.projectId,startTime:e[0]||"",endTime:e[1]||""});return Object(Ft["c"])(r)})),e.next=4,Promise.all(r);case 4:return n=e.sent,i=(n||[]).map((function(e,a){return Object(Ft["s"])(t.adgroups[a].id,e.id)})),e.prev=6,e.next=9,Promise.all(i);case 9:o=e.sent,l=o[0],0===l.status&&(t.$message({message:l.message,type:"success"}),t.$emit("reload")),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](6),t.$message({message:"请求出错了!",type:"error"});case 17:case"end":return e.stop()}}),e,null,[[6,14]])})))()}}},Et=Bt,zt=(a("0c10"),Object(b["a"])(Et,i,o,!1,null,null,null)),Pt=zt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"choose-freq-wraper"},[a("top-search-bar",{ref:"searchRef",attrs:{config:t.searchItems},on:{fSearch:t.fSearch,operate:t.fOperation}}),a("pagination-pro",{directives:[{name:"loading",rawName:"v-loading",value:t.bIsLoading,expression:"bIsLoading"}],ref:"chooseFreqRef",staticClass:"pagination-top",attrs:{method:"post",autoload:!1,"page-size":10,url:"/d/frequencty/list",params:t.searchObject,loading:t.bIsLoading},on:{"update:loading":function(e){t.bIsLoading=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[a("el-table",{staticClass:"conflict-table",attrs:{data:r,border:""},on:{"selection-change":t.fSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._l(t.columns,(function(e){return a("el-table-column",t._b({directives:[{name:"loading",rawName:"v-loading",value:t.bIsLoading,expression:"bIsLoading"}],key:e.prop,attrs:{align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[e.link?a("router-link",{staticClass:"link",attrs:{to:{path:e.link+"/"+n.id}}},[t._v(" "+t._s(t._f("render")(n,e))+" ")]):a("span",[t._v(t._s(t._f("render")(n,e)))])]}}],null,!0)},"el-table-column",e,!1))}))],2)]}}])})],1)},Ht=[],Kt=(a("0d03"),a("25f0"),a("46f1")),Jt={mixins:[Gt["c"]],components:{TopSearchBar:Kt["a"]},data:function(){var t=this;return{columns:[{prop:"id",label:"ID","min-width":60},{prop:"name",label:"名称","min-width":120},{prop:"type",label:"类型","min-width":80,formatter:function(t){var e={0:"自定义",1:"全周期",2:"天",3:"分钟",4:"月",5:"季度"};return e[t.type]||"未知"}},{prop:"duration",label:"周期","min-width":60},{prop:"number",label:"控频次数","min-width":60},{prop:"addFrequencyNum",label:"追投","min-width":100,formatter:function(t){var e=t.isAddFrequency;return null==e||1!=e?"不追投":t.addFrequencyNum}},{prop:"pageType",label:"页面类型","min-width":100,formatter:function(t){var e={1:"播放器",2:"页面"};return e[t.pageType]||"未知"}},{prop:"platName",label:"平台","min-width":60},{prop:"projectNumber",label:"执行单","min-width":120,formatter:function(e){var a=e.projectNumber;return null!=a&&a==t.projectNumber?"本单":a}}],bIsLoading:!1,searchObject:{},addList:[]}},props:{adgroups:{type:Array,default:function(){return[]}},type:{type:Number,default:1},projectNumber:{type:String,default:""}},computed:{searchItems:function(){var t=this.adgroups&&this.adgroups[0]||{},e=t.bartemplet&&t.bartemplet.pagetype;return{labelWidth:"60px",searchItems:[{type:"Input",prop:"id",formItemAttrs:{label:"频次ID","label-width":"50px"},attrs:{clearable:!0,style:"width:140px"}},{type:"Input",prop:"name",formItemAttrs:{label:"频次名称"},attrs:{clearable:!0,style:"width:140px"}},{type:"Select",prop:"type",default:"",formItemAttrs:{label:"频次类型"},attrs:{placeholder:"频次类型",clearable:!0,style:"max-width:120px"},data:[{datavalue:"",dataname:"全部"},{datavalue:"1",dataname:"全周期"},{datavalue:"2",dataname:"天"},{datavalue:"3",dataname:"分钟"},{datavalue:"4",dataname:"月"},{datavalue:"5",dataname:"季度"}]},{type:"Input",prop:"duration",formItemAttrs:{label:"频控周期"},attrs:{clearable:!0,style:"width:80px"}},{type:"Input",prop:"number",formItemAttrs:{label:"控频次数"},attrs:{clearable:!0,style:"width:80px"}},{type:"Select",prop:"isAddFrequency",default:"",formItemAttrs:{label:"追投","label-width":"50px"},attrs:{placeholder:"",clearable:!0,style:"max-width:120px"},data:[{datavalue:"",dataname:"全部"},{datavalue:"1",dataname:"追投"},{datavalue:"0",dataname:"不追投"}]},{type:"Input",prop:"addFrequencyNum",formItemAttrs:{label:"追投次数"},attrs:{clearable:!0,style:"width:80px"},ifRender:function(t){return 1==t.isAddFrequency}},{type:"DataPicker",prop:"submitTime",startTimeKey:"starttime",endTimeKey:"endtime",formItemAttrs:{label:"起止日期","label-width":"80px"},attrs:{clearable:!0,style:"width:250px",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyyMMdd","value-format":"yyyyMMdd"}},{type:"Select",prop:"pageType",formItemAttrs:{label:"页面类型"},attrs:{placeholder:"",clearable:!0,style:"max-width:120px"},data:[{datavalue:"",dataname:"全部",disabled:!!e},{datavalue:"1",dataname:"播放器",disabled:"2"===e},{datavalue:"2",dataname:"页面",disabled:"1"===e}]},{type:"Select",prop:"plat",total:!0,formItemAttrs:{label:"平台","label-width":"50px"},attrs:{placeholder:"请选择",clearable:!0,style:"max-width:140px"},listGetter:{url:"/system/basedata/list",params:{searchDatatype:"plat"},keyMap:{list:"rows"},data:[],optionValue:"datavalue",optionName:"dataname"}},{type:"Input",prop:"projectNumber",formItemAttrs:{label:"执行单号"},attrs:{placeholder:"默认为本执行单",clearable:!0,style:"width:140px"}}],searchButtons:[{name:"查询"},{name:"重置"},{name:"添加",attrs:{disabled:0===this.addList.length}}]}}},mounted:function(){var t=this;setTimeout((function(){var e=t.adgroups&&t.adgroups[0]||{},a={plat:e.plat.toString(),pageType:e.bartemplet&&e.bartemplet.pagetype};t.$refs.searchRef.fSetSearchVal(a),t.fSearch(a)}),2e3)},methods:{fReload:function(){var t=this;this.$nextTick((function(){t.$refs.chooseFreqRef.fReload()}))},fSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.searchObject=Object(s["a"])({},t,{ftype:3==this.type?2:1,projectNumber:this.projectNumber}),this.fReload()},fSelectChange:function(t){this.addList=t},fOperation:function(t){var e=this;if("添加"===t.name){var a=this.adgroups.map((function(t){return t.id})),r=this.addList.map((function(t){return t.id}));Object(Ft["s"])(a,r).then((function(t){0===t.status&&(e.$message({message:t.message,type:"success"}),e.$emit("reload"))}))}}}},Wt=Jt,Qt=Object(b["a"])(Wt,Ut,Ht,!1,null,null,null),Xt=Qt.exports,Zt={components:{createFreq:Pt,chooseFreq:Xt},data:function(){return{activeTab:"createFreq",tabList:[{name:"新建频次",prop:"createFreq"},{name:"选择频次",prop:"chooseFreq"}]}},props:{value:{type:Boolean,default:!1},adgroups:{type:Array,default:function(){return[]}},type:{type:Number,default:1},projectNumber:{type:String,default:""}},computed:{bIsVisible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{fReload:function(){this.bIsVisible=!1,this.$emit("reload")},fShow:function(){}}},Yt=Zt,te=(a("0765"),Object(b["a"])(Yt,r,n,!1,null,null,null));e["a"]=te.exports}}]);