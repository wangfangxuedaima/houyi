(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60fabb54"],{5603:function(e,t,a){},a098:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-wraper fullsize fullsize-flex viewflight-wraper"},[a("top-search-bar",{ref:"searchRef",attrs:{config:e.searchItems},on:{operate:e.fOperate,fSearch:e.fSearch}}),a("el-dialog",{attrs:{title:"北上广深完成情况",visible:e.dialogTableVisible,width:"75%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[e._l(e.cityData,(function(e){return[a("el-table-column",{key:e.prop,attrs:{property:e.prop,label:e.label,width:"150"}})]}))],2)],1),a("pagination-pro",{ref:"pageRef",staticClass:"mg-t-10 grow-1",attrs:{loading:e.bIsLoading,autoload:!1,fullsize:!0,"page-size":20,"page-sizes":[20,50,100,200],layout:"sizes, prev, pager, next, ->, total",url:"/d/viewflight/list",params:e.searchObject,onResponse:e.fOnResponse},on:{"update:loading":function(t){e.bIsLoading=t}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.data,l=t.height;return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.bIsLoading,expression:"bIsLoading"}],attrs:{data:e.tableDate(i),"max-height":l,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"40"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",label:"排期包ID"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("router-link",{attrs:{to:"/flight/advproject/flightdetail/"+i.bpId}},[e._v(e._s(i.bpId))])]}}],null,!0)}),e._l(e.columns,(function(t){return[t.hidden?e._e():a("el-table-column",e._b({key:t.prop,attrs:{"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[e._v(e._s(e._f("render")(i,t)))]}}],null,!0)},"el-table-column",t,!1))]}))],2)]}}])}),a("el-dialog",{attrs:{title:"汇总项",visible:e.showDig,width:"80%"},on:{"update:visible":function(t){e.showDig=t}}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.checkAll}},[e._v(" 全选 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.cleanCheck}},[e._v(" 清空 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.backCheck}},[e._v(" 反选 ")]),a("el-checkbox-group",{model:{value:e.showList,callback:function(t){e.showList=t},expression:"showList"}},[e._l(e.checkList,(function(t){return[a("el-checkbox",{key:t.label,staticClass:"el-checkbox-item",attrs:{label:t.index}},[e._v(" "+e._s(t.label)+" ")])]}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDig=!e.showDig}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:!e.showList.length},on:{click:e.hasModifyToIndex}},[e._v("确 定")])],1)],1)],1)},l=[],n=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("b680"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("5530")),r=a("0c6d");function o(e){return Object(r["a"])({url:"/d/basedata/list",method:"post",data:{datatype:e},dataType:"formData"})}var s=a("c387"),d=a("46f1"),c=a("1b62"),p={name:"viewFlight",components:{TopSearchBar:d["a"]},mixins:[c["c"]],data:function(){var e=function(e){return{url:"/system/basedata/list",params:{searchDatatype:e},keyMap:{list:"rows"},data:[],optionValue:"datavalue",optionName:"dataname",filter:function(e){return e.filter((function(e){return 2!=e.status}))}}};return{gridData:[],showList:[],columns:[],bIsLoading:!1,dialogTableVisible:!1,showDig:!1,searchObject:{},canOperate:!0,cityData:[{prop:"areaName",label:"城市"},{prop:"cpmcount",label:"当日预定量"},{prop:"cpmcountRate",label:"预定量占比"},{prop:"flightcpm",label:"当日投放量"},{prop:"finishedcpm",label:"当日完成量"},{prop:"finishedRate",label:"当日完成率"}],checkList:[{prop:"flighttime",label:"日期",width:"150",filter:"date",hidden:!0,index:0},{prop:"advname",label:"广告名称",width:"400",hidden:!1,index:1},{prop:"advFlightStatusName",label:"广告状态",hidden:!1,index:2},{prop:"platName",label:"平台",width:150,hidden:!1,index:3},{prop:"appiddirect",label:"范围",width:"150",hidden:!1,index:4},{prop:"projectNumber",label:"执行单号",width:300,hidden:!1,index:5},{prop:"realprice",label:"排期包单价",width:150,filter:"fmoney",hidden:!1,index:6},{prop:"projectRealprice",label:"执行单金额",width:150,filter:"fmoney",hidden:!1,index:7},{prop:"projectStarttime",label:"开始日期",width:150,filter:"date",hidden:!1,index:8},{prop:"projectEndtime",label:"结束日期",width:150,filter:"date",hidden:!1,index:9},{prop:"advertisername",label:"广告商",width:"150",hidden:!1,index:10},{prop:"duration",label:"广告时长",hidden:!1,index:11},{prop:"bstatusName",label:"执行单状态",width:150,hidden:!1,index:12},{prop:"hourdirectName",label:"小时定向",index:13,hidden:!1},{prop:"useTypeName",label:"使用属性",hidden:!1,index:14},{prop:"adStyle",label:"广告形式code",width:150,hidden:!1,index:15},{prop:"adStyleName",label:"广告形式",hidden:!1,index:16},{prop:"frequency",label:"频次",hidden:!1,width:280,index:17},{prop:"iscpm2",label:"CPM2属性",hidden:!1,index:18},{label:"定向分类",prop:"cpmResName",width:280,align:"center",index:19,hidden:!1},{label:"定向地域",prop:"areaName",width:80,align:"center",hidden:!1,index:20},{label:"总预定量",prop:"cpmcount2",hidden:!1,width:80,align:"center",filter:"cpmFun",index:21},{label:"总完成量",prop:"finishedcpm2",width:"150px",align:"center",index:22,filter:"cmpFun2",hidden:!1},{label:"整体完成率",prop:"cpmcount2Rate",width:"150px",align:"center",index:23},{label:"当日预定量",prop:"cpmcount",width:"150px",align:"center",index:24,hidden:!1,filter:"cpmFun"},{label:"当日投放量",prop:"flightcpm",width:"150px",align:"center",index:25,hidden:!1,filter:"cpmFun"},{label:"当日完成量",prop:"finishedcpm",width:"150px",align:"center",index:26,hidden:!1,filter:"cmpFun2"},{label:"当日完成率",prop:"flightcpmRate",width:"150px",align:"center",index:27},{label:"投放者",prop:"flightuser",width:"150px",align:"center",hidden:!1,index:28},{label:"执行单级别",prop:"projectLevelName",width:100,align:"center",hidden:!1,index:29},{label:"广告id",prop:"advid",width:"150px",align:"center",hidden:!1,index:30},{label:"异常流量屏蔽",prop:"abnormalFlow",width:150,align:"center",hidden:!1,index:31}],searchItems:{labelWidth:"75px",hideenSearchBtn:!0,searchButtons:[{name:"查询",attrs:{icon:"el-icon-search"}},{name:"清空"},{name:"设置",attrs:{icon:"el-icon-s-tools"}},{name:"统计",attrs:{icon:"el-icon-s-data"}},{name:"下载",attrs:{icon:"el-icon-download"}}],searchItems:[{type:"Input",prop:"projectNumber",formItemAttrs:{label:"执行单号"},attrs:{clearable:!0,style:"width:150px"}},{type:"Input",prop:"bpId",formItemAttrs:{label:"排期包ID"},attrs:{clearable:!0,style:"width:150px"}},{type:"Input",prop:"advertisername",dataMap:"advertisername",default:"",formItemAttrs:{label:"广告主"},attrs:{style:"width:150px",clearable:!0}},{type:"Select",prop:"projectLevel",dataMap:"projectLevel",formItemAttrs:{label:"执行单级别"},attrs:{clearable:!0,style:"width:150px"},data:[]},{type:"Select",prop:"bussinessstatus",dataMap:"bussinessstatus",formItemAttrs:{label:"执行单状态"},attrs:{clearable:!0,style:"width:150px"},data:[]},{type:"Select",prop:"areaName",dataMap:"areadirect",default:"",formItemAttrs:{label:"地域定向"},attrs:{clearable:!0,style:"max-width:150px"},data:[]},{type:"Select",prop:"saletype",dataMap:"saletype",formItemAttrs:{label:"售卖方式"},attrs:{clearable:!0,style:"width:150px"},data:[]},{type:"Select",prop:"platCodes",default:[],formItemAttrs:{label:"平台","label-width":"50px"},attrs:{placeholder:"请选择",multiple:!0,"collapse-tags":!0,clearable:!0,style:"max-width:180px"},listGetter:e("plat")},{type:"Input",prop:"advertisername",default:"",formItemAttrs:{label:"广告主"},attrs:{style:"width:150px",clearable:!0}},{type:"Select",prop:"adStyle",dataMap:"adstyle",formItemAttrs:{label:"广告形式"},attrs:{clearable:!0,style:"width:150px"},data:[]},{type:"Select",prop:"advFlightStatus",dataMap:"advFlightStatus",formItemAttrs:{label:"广告状态"},attrs:{clearable:!0,style:"width:150px"},data:[]},{type:"DataPicker",prop:"submitTime",startTimeKey:"starttime",endTimeKey:"endtime",formItemAttrs:{label:"起止日期","label-width":"80px"},attrs:{clearable:!0,style:"width:250px",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"}}]}}},created:function(){var e=this;this.showList=this.checkList.map((function(e){return e.index})),this.columns=this.checkList,this.fGetMapData(["projectLevel","bussinessstatus","adstyle","plat","advFlightStatus","saletype","directional_type"]),Object(s["a"])().then((function(t){var a=t.cityFinishedcpm,i=t.cityCpmSumBook;if(t.cityFinishedcpm.length){var l=!0,n=!1,r=void 0;try{for(var o,s=a[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){var d=o.value;e.getCityData.push({areaName:d.areaName,cpmcount:1e3*d.cpmcount,cpmcountRate:(100*d.cpmcount/i.cpmcount2).toFixed(2)+"%",flightcpm:1e3*d.flightcpm,finishedcpm:d.finishedcpm,finishedRate:(d.finishedcpm/(10*d.flightcpm)).toFixed(2)+"%"})}}catch(c){n=!0,r=c}finally{try{l||null==s["return"]||s["return"]()}finally{if(n)throw r}}}e.gridData.push({areaName:"地区",cpmcount:1e3*i.cpmcount,cpmcountRate:(100*i.cpmcount/i.cpmcount2).toFixed(2)+"%",flightcpm:1e3*i.flightcpm,finishedcpm:i.finishedcpm,finishedRate:null!=i.flightcpm&&0!=i.flightcpm?(i.finishedcpm/(10*i.flightcpm)).toFixed(2)+"%":"无"})})),this.fReload()},methods:{fGetMapData:function(e){var t=this,a=!0,i=!1,l=void 0;try{for(var n,r=function(){var e=n.value;o(e).then((function(a){var i=!0,l=!1,n=void 0;try{for(var r,o=t.searchItems.searchItems[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var s=r.value;s.dataMap==e&&(s.data=a)}}catch(d){l=!0,n=d}finally{try{i||null==o["return"]||o["return"]()}finally{if(l)throw n}}}))},s=e[Symbol.iterator]();!(a=(n=s.next()).done);a=!0)r()}catch(d){i=!0,l=d}finally{try{a||null==s["return"]||s["return"]()}finally{if(i)throw l}}},tableDate:function(e){if(e.length){var t=!0,a=!1,i=void 0;try{for(var l,n=e[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){var r=l.value;if(r.iscpm2=this.iscpmFun(r.iscpm2,null,r)||r.iscpm2,r.flightcpmRate=this.dayfinishedRateFun(r.flightcpm,null,r),!r.cpmcount2||null===r.finishedcpm2)return"0.00%";r.cpmcount2Rate=(100*r.finishedcpm2/(1e3*r.cpmcount2)).toFixed(2)+"%"}}catch(o){a=!0,i=o}finally{try{t||null==n["return"]||n["return"]()}finally{if(a)throw i}}}return e},dayfinishedRateFun:function(e,t,a){return null!=a.finishedcpm&&0!=e?(a.finishedcpm/(10*e)).toFixed(2)+"%":"0.00%"},iscpmFun:function(e,t,a){var i="";return 1==e?(""!=a.posDirectName&&"未知"!=a.posDirectName&&(i=a.posDirectName),null!=a.seq&&null!=a.num&&(i+=",",1==a.seq&&1==a.num?i+="全流量":1==a.seq&&1==a.num||(i+=a.seq/a.num+"流量"))):0==e&&(i="无"),i},backCheck:function(){var e={},t=!0,a=!1,i=void 0;try{for(var l,n=this.showList[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){var r=l.value;e[r]=!0}}catch(c){a=!0,i=c}finally{try{t||null==n["return"]||n["return"]()}finally{if(a)throw i}}for(var o=this.checkList.length,s=[],d=0;d<o;d++)e[d]||s.push(d);this.showList=s},checkAll:function(){this.showList=this.checkList.map((function(e){return e.index}))},cleanCheck:function(){this.showList=[]},hasModifyToIndex:function(){var e=this;if(this.showList.length){var t=!0,a=!1,i=void 0;try{for(var l,n=this.checkList[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){var r=l.value;r["hidden"]=!0}}catch(o){a=!0,i=o}finally{try{t||null==n["return"]||n["return"]()}finally{if(a)throw i}}this.showList.forEach((function(t){void 0!==t&&(e.checkList[t]["hidden"]=!1)})),this.$nextTick((function(){e.columns=e.checkList})),this.showDig=!1}else this.$alert("展示项不能为空","错误",{confirmButtonText:"确定"})},fOperate:function(e){switch(e.name){case"设置":this.showDig=!this.showDig;break;case"统计":this.dialogTableVisible=!this.dialogTableVisible;break;case"下载":alert(333);break}},fReload:function(){var e=this;this.$nextTick((function(){e.$refs.pageRef.fReload()}))},onClean:function(){for(var e in this.info)this.info[e]=""},fOnResponse:function(){},fSearch:function(e){this.searchObject=Object(n["a"])({},e,{platCodes:e.platCodes.join(",")}),this.fReload()},onSubmit:function(){this.fReload()},handleSelectionChange:function(){},handleSelect:function(){}},mounted:function(){}},h=p,u=(a("a4a3"),a("2877")),f=Object(u["a"])(h,i,l,!1,null,"a5958bfe",null);t["default"]=f.exports},a4a3:function(e,t,a){"use strict";var i=a("5603"),l=a.n(i);l.a},c387:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a("0c6d");function l(){return Object(i["a"])({url:"/d/viewflight/searcCityFinishedcpm",method:"post"})}}}]);