(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb645424"],{1548:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-popover",{attrs:{trigger:"hover",placement:"right"}},[n("el-button-group",[e._l(this.info.operationList,(function(t,i){return e.fCheckHasPermission(t.pemissionUrl)&&!t.isHidden?n("el-button",{key:i,attrs:{size:"mini",type:t.type},on:{click:function(n){return e.fOperation(t)}}},[e._v(e._s(t.name))]):e._e()})),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.fCopyItem}},[e._v("复制")])],2),n("template",{slot:"reference"},[n("link-component",{attrs:{object:e.info.detail}})],1)],2)],1)},s=[],a=(n("b0c0"),n("9911"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.fCheckHasPermission(e.object.pemissionUrl)?n("div",{staticClass:"link",on:{click:e.fGoto}},[e._v(" "+e._s(e.object.val)+" ")]):n("div",{staticClass:"link"},[e._v(e._s(e.object.val))])])}),o=[],r={props:{object:{type:Object,default:function(){}}},methods:{fGoto:function(){this.$router.push({path:this.object.link})}}},l=r,c=(n("ce07"),n("2877")),u=Object(c["a"])(l,a,o,!1,null,"3f3310d8",null),p=u.exports,f=n("1b62"),d={mixins:[f["b"],f["c"]],components:{linkComponent:p},props:{info:{type:Object,default:function(){return{index:-1,detail:{pemissionUrl:"",link:"",val:""},autoCopy:!0,operationList:[{name:"修改",link:"",isShow:!0,type:"primary",fOperation:function(){},operation:{reqFunction:function(){},reqParam:{},confirmMessage:"",emitName:""}}]}}}},methods:{fOperation:function(e){var t=this;if(e.link){if(e.fOperation)return void e.fOperation();this.$router.push(e.link)}else e.operation&&(e.operation.confirmMessage?this.$confirm(e.operation.confirmMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.fDealOperation(e)})):this.fDealOperation(e))},fDealOperation:function(e){var t=this;e.operation.reqFunction(e.operation.reqParam).then((function(n){200===n.code&&(t.$emit(e.operation.emitName,t.info.detail.val),t.$message({message:"".concat(e.name,"成功"),type:"success"}))}))["catch"]((function(e){}))},fCopyItem:function(){this.info.autoCopy?this.$emit("autoCopy",this.info.detail.val):this.fCopy(this.info.detail.val)}}},m=d,h=Object(c["a"])(m,i,s,!1,null,null,null);t["a"]=h.exports},"26e9":function(e,t,n){"use strict";var i=n("23e7"),s=n("e8b5"),a=[].reverse,o=[1,2];i({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),a.call(this)}})},"41fd":function(e,t,n){},"490a":function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("0c6d");function s(e){return Object(i["a"])({url:"/system/modules/all/tree",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/system/modules/".concat(e.id),method:"delete"})}function o(e,t){return Object(i["a"])({url:"/system/modules",method:t?"put":"post",data:e})}function r(e){return Object(i["a"])({url:"/system/modules/".concat(e),method:"get"})}},"4a02":function(e,t,n){"use strict";var i=n("41fd"),s=n.n(i);s.a},5175:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-wraper"},[n("div",{staticClass:"op-bar"},[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"/system/modules/create/:id",expression:"'/system/modules/create/:id'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.fCreate}},[e._v("新增模块")])],1),n("el-steps",{staticClass:"step-bar",attrs:{active:e.steps.length,simple:""}},e._l(e.steps,(function(t){return n("el-step",{key:t.title,attrs:{icon:"el-icon-menu",title:t.title},nativeOn:{click:function(n){return e.fJumptoLevel(t.id)}}})})),1),n("pagination-pro",{ref:"pageRef",attrs:{loading:e.bIsLoading,url:"/system/modules",method:"get",autoload:!1,"key-map":{data:"data.rows"},params:e.listParams},on:{"update:loading":function(t){e.bIsLoading=t}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.data;return[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.bIsLoading,expression:"bIsLoading"}],ref:"table",attrs:{data:i,border:"","header-cell-class-name":"table-header"}},[n("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"210px",align:"center",prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("row-pop-view",{attrs:{info:e._f("popViewInfo")(i)},on:{fReload:e.fReload}})]}}],null,!0)}),n("el-table-column",{attrs:{"min-width":"150px",align:"center",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.url||"/")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{"min-width":"150px",align:"center",label:"CODE"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.code||"/")+" ")]}}],null,!0)})],1)]}}])})],1)},s=[],a=(n("4160"),n("26e9"),n("a434"),n("b0c0"),n("159b"),n("1b62")),o=n("490a"),r=n("1548"),l={title:"一级列表",id:-1},c={mixins:[a["d"],a["c"]],components:{RowPopView:r["a"]},data:function(){return{isRefresh:!1,listParams:{parentId:-1},steps:[l],activeStepIndex:1}},filters:{popViewInfo:function(e){return{detail:{pemissionUrl:"/system/modules/index/:id",link:"/system/modules/index/".concat(e.id),val:e.name},operationList:[{name:"修改",link:"/system/modules/edit/".concat(e.id),pemissionUrl:"/system/modules/edit/:id",type:"primary"},{name:"新建子模块",link:"/system/modules/create/".concat(e.id),pemissionUrl:"/system/modules/create/:id",type:"warning"},{name:"删除",pemissionUrl:"/system/users/delete",type:"danger",operation:{reqFunction:o["a"],reqParam:{id:e.id},confirmMessage:"将删除模块，请确定是否执行",emitName:"fReload"}}]}}},watch:{$route:{handler:function(e){var t=e.params.id;":id"===t&&(t=-1,this.$router.push({name:"module-index",params:{id:-1},type:"replace"})),this.listParams.parentId=t||-1,this.fReload(),this.fGetModuleInfo(this.listParams.parentId)},immediate:!0}},created:function(){this.isRefresh=1===this.steps.length&&-1!==this.listParams.parentId,this.isRefresh&&(this.steps=[])},methods:{fReload:function(){var e=this;this.$nextTick((function(){e.$refs.pageRef.fReload()}))},fJumptoLevel:function(e){e!==this.$route.params.id&&this.$router.push({name:"module-index",params:{id:e},type:"replace"})},fGetModuleInfo:function(e){var t=this;-1!==+e?Object(o["b"])(e).then((function(e){var n=e.data;if(n)if(t.isRefresh)t.steps.push({title:n.name,id:n.id}),-1!==n.parentId?t.fGetModuleInfo(n.parentId):(t.steps.push(l),t.steps.reverse(),t.isRefresh=!1);else{var i=null,s=null;t.steps.forEach((function(e,t){e.title===n.name&&(i=e,s=t)})),i?t.steps.splice(s+1):t.steps.push({title:n.name,id:n.id})}})):this.steps=[l]},fCreate:function(){this.$router.push({name:"modules-create",params:{id:this.$route.params.id||-1}})}}},u=c,p=(n("4a02"),n("2877")),f=Object(p["a"])(u,i,s,!1,null,"58917498",null);t["default"]=f.exports},"857a":function(e,t,n){var i=n("1d80"),s=/"/g;e.exports=function(e,t,n,a){var o=String(i(e)),r="<"+t;return""!==n&&(r+=" "+n+'="'+String(a).replace(s,"&quot;")+'"'),r+">"+o+"</"+t+">"}},9911:function(e,t,n){"use strict";var i=n("23e7"),s=n("857a"),a=n("af03");i({target:"String",proto:!0,forced:a("link")},{link:function(e){return s(this,"a","href",e)}})},a4cf:function(e,t,n){},af03:function(e,t,n){var i=n("d039");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},ce07:function(e,t,n){"use strict";var i=n("a4cf"),s=n.n(i);s.a}}]);