(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af992d1e"],{"5b1a":function(e,t,s){"use strict";var a=s("813b"),r=s.n(a);r.a},"813b":function(e,t,s){},c5d5:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-user-container"},[s("create-view",{attrs:{formItems:e.formItems,"label-position":"right","label-width":"120px"},on:{submit:e.fSaveUser},model:{value:e.userInfo,callback:function(t){e.userInfo=t},expression:"userInfo"}})],1)},r=[],o=(s("99af"),s("caad"),s("a15b"),s("b64b"),s("07ac"),s("ac1f"),s("2532"),s("1276"),s("5530")),i=s("1b62"),n=s("6fd5"),u=s("2ef0"),c=s("72fe"),l={mixins:[i["c"]],components:{CreateView:c["a"]},data:function(){var e="edit"===this.$route.meta.action;return{userInfo:{},allRoles:[],formItems:[{type:"Section",title:"基本信息",prop:"baseInfo"},{type:"Input",prop:"username",formItemAttrs:{label:"邮箱",rules:[{required:!0,message:"邮箱不能为空",trigger:"blur"}]},attrs:{append:"@sohu-inc.com",placeholder:"邮箱地址前缀",clearable:!0,disabled:e}},{type:"Input",prop:"name",formItemAttrs:{label:"昵称",rules:[{required:!0,message:"昵称不能为空",trigger:"blur"}]}},{type:"Section",title:"角色信息",prop:"role"},{type:"Select",prop:"status",hidden:!e,formItemAttrs:{label:"状态"},data:[{datavalue:"1",dataname:"启用"},{datavalue:"2",dataname:"停用"}]},{type:"CheckBox",prop:"roleList",formItemAttrs:{label:"选择角色"},listGetter:{url:"/system/roles",params:{pageNum:1,pageSize:20},keyMap:{list:"data.rows"},data:[],optionValue:"id",optionName:"name"}}]}},created:function(){this.isCreate||this.fGetUserInfo()},methods:{fGetUserInfo:function(){var e=this;Object(n["b"])(this.$route.params.id).then((function(t){var s=t.data;e.userInfo=Object(o["a"])({},s,{username:s.username.split("@")[0],status:Object(u["toString"])(s.status),roleList:s.roleList?s.roleList.split(","):[]}),console.log(e.userInfo)}))},fSaveUser:function(){var e=this,t="@sohu-inc.com",s=Object(o["a"])({},Object(u["omit"])(this.userInfo,"creator"),{username:this.userInfo.username.includes(t)?this.userInfo.username:"".concat(this.userInfo.username).concat(t),roleList:Object.keys(this.userInfo.roleList).join(),roleNameList:Object.values(this.userInfo.roleList).join(),status:this.isCreate?"1":this.userInfo.status});this.isEdit&&(s.id=this.$route.params.id),Object(n["c"])(s,this.isCreate).then((function(t){200===t.code&&(e.$message({message:t.data,type:"success"}),e.$router.back())}))}}},f=l,m=(s("5b1a"),s("2877")),p=Object(m["a"])(f,a,r,!1,null,"14d204bb",null);t["default"]=p.exports}}]);