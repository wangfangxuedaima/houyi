(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-404cf1fb"],{"0407":function(e,t,a){},df66:function(e,t,a){"use strict";var n=a("0407"),o=a.n(n);o.a},ea50:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-wraper fullsize fullsize-flex viewflight-wraper"},[e._m(0),a("div",{staticClass:"top"},[a("p",{staticClass:"fz10",staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:e.deleteCon}},[e._v("删除")]),e._v(" 已设置冲突执行单列表 ")],1),a("pagination-pro",{ref:"pageRef1",staticClass:"mg-t-10 tableList",attrs:{loading:e.bIsLoading1,autoload:!1,fullsize:!0,"page-size":20,"page-sizes":[20,50,100,200],layout:"sizes, prev, pager, next, ->, total",url:"d/proconflict/list",params:e.searchObject1,method:"post"},on:{"update:loading":function(t){e.bIsLoading1=t}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data;return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.bIsLoading1,expression:"bIsLoading1"}],attrs:{data:n,border:""},on:{"selection-change":e.handleSelectionChange1}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"40"}}),e._l(e.columns,(function(t){return[a("el-table-column",e._b({key:t.prop,attrs:{"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[e._v(e._s(e._f("render")(n,t)))]}}],null,!0)},"el-table-column",t,!1))]}))],2)]}}])})],1),a("div",{staticClass:"bottom"},[e._m(1),a("top-search-bar",{ref:"searchRef",attrs:{config:e.searchItems},on:{operate:e.fOperate,fSearch:e.fSearch}}),a("pagination-pro",{ref:"pageRef",staticClass:"mg-t-10 tableList",attrs:{loading:e.bIsLoading,autoload:!0,fullsize:!0,"page-size":20,"page-sizes":[20,50,100,200],layout:"sizes, prev, pager, next, ->, total",url:"d/proconflict/searchlist",params:e.searchObject,method:"post"},on:{"update:loading":function(t){e.bIsLoading=t}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data;return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.bIsLoading,expression:"bIsLoading"}],attrs:{data:n,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"40"}}),e._l(e.columns,(function(t){return[a("el-table-column",e._b({key:t.prop,attrs:{"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[e._v(e._s(e._f("render")(n,t)))]}}],null,!0)},"el-table-column",t,!1))]}))],2)]}}])})],1)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticStyle:{"font-size":"20px"}},[e._v(" 当前执行单号: "),a("span",{staticStyle:{color:"green"}},[e._v("FHTV-BJ-20-00001#M002tv")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"fz10"},[e._v(" 待设置冲突执行单: "),a("span",[e._v("(查询结果中不包含已经设置为冲突的执行单)")])])}],s=(a("4de4"),a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("2532"),a("5530")),r=(a("96cf"),a("1da1")),i=a("0c6d");function l(e){return Object(i["a"])({url:"/d/proconflict/opproconflict",method:"post",dataType:"formData",data:e})}function c(e){return Object(i["a"])({url:"/d/proconflict/getAdNamelist",method:"post",dataType:"formData",data:e})}var d=a("46f1"),u=a("1b62"),f={name:"viewFlight",components:{TopSearchBar:d["a"]},mixins:[u["c"]],data:function(){return{id:this.$route.params.id,momentList:[],momentList1:[],adNameList:[],columns:[{prop:"id",label:"Id"},{prop:"name",label:"执行单号"},{prop:"advertisername",label:"广告主"},{prop:"productlinename",label:"产品线"},{prop:"starttime",label:"开始时间",filter:"date"},{prop:"endtime",label:"结束时间",filter:"date"}],bIsLoading:!1,bIsLoading1:!1,searchObject:{id:this.id||12396},searchObject1:{projectId:this.id||12396,_search:!1},searchItems:{labelWidth:"75px",hideenSearchBtn:!0,searchButtons:[{name:"查询"},{name:"设置冲突"}],searchItems:[{type:"Input",prop:"number",formItemAttrs:{label:"执行单号"},attrs:{clearable:!0,style:"width:150px"}},{type:"el-autocomplete",prop:"advertisername",disabled:!0,formItemAttrs:{label:"广告主"},attrs:{clearable:!0,style:"width:150px","fetch-suggestions":this.querySearchAsync}}]}}},created:function(){this.fReload(),this.fReload1(),console.log(this.$route.params.id)},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:e.adNameList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{deleteCon:function(){var e=this,t=this.momentList1.map((function(e){return e.id})).join(",");0===t.length&&this.$message.error("删除执行单冲突功能，请至少选择一个执行单"),l({conflictIds:t,projectId:this.id,opType:"delete"}).then((function(t){0===+t.status&&(e.fReload(),e.fReload1())}))},fOperate:function(e){var t=this;switch(e.name){case"设置冲突":var a=this.momentList.map((function(e){return e.id})).join(",");0===a.length&&this.$message.error("设置执行单冲突功能，请至少选择一个执行单"),l({conflictIds:a,projectId:this.id,opType:"add"}).then((function(e){console.log(e),0===+e.status?(t.fReload(),t.fReload1()):t.$message.error(e.message)}));break}},fReload:function(){var e=this;this.$nextTick((function(){e.$refs.pageRef.fReload()}))},fReload1:function(){var e=this;this.$nextTick((function(){e.$refs.pageRef1.fReload()}))},fSearch:function(e){this.searchObject=Object(s["a"])({},this.searchObject,{},e),this.fReload()},querySearchAsync:function(e,t){var a=this.adNameList.filter((function(t){return t.name.includes(e)}));t(a)},handleSelectionChange:function(e){this.momentList=e},handleSelectionChange1:function(e){this.momentList1=e}}},p=f,h=(a("df66"),a("2877")),m=Object(h["a"])(p,n,o,!1,null,"11e286d7",null);t["default"]=m.exports}}]);